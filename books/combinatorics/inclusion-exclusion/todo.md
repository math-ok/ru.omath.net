* Комбинаторика Виленкина "Формула включений и исключений" и "Решето Эратосфена" + многие комбинаторные задачи ближе к концу второй главы и связи со свойствами сочетаний.

* Финальные задачи второй главы. Много задач на включ-исключ.

* Связь формулы включений-исключений с биномом Ньютона.

* Рыцари короля артура: задачи 55, 56, 59, 61, 62 и другие проверить тоже.

@task
    title: Большие перестановки
    statement: |
        Сколько можно сделать перестановок из $n$ элементов, в которых:

        а) данные два элемента $a$ и $b$ не стоят рядом;<br>
        б) данные три элемента $a, b, c$ не стоят рядом (в любом порядке);<br>
        в) никакие два из данных трех элементов $a, b, c$ не стоят рядом;<br>
        г) никакие два из заданных $k$ элементов $a_1, \ldots, a_k$ не стоят рядом;<br>
        д) никакие $3$ из заданных $k$ элементов $a_1, \ldots, a_k$ не стоят рядом (в любом порядке)?
    solution: |
        Без всяких ограничений из $n$ элементов можно сделать $P_n = n!$ перестановок.

        ### Пункт а)

        Посчитаем количество перестановок, в которых $a$ и $b$ стоят рядом.
        $P_2$ способа расположить $a$ и $b$ парой, $P_{n-2}$ перестановок без этих двух элементов и $(n-1)$ способов эту пару ["впихнуть"](spoiler:insert-variants) куда-то в перестановки без нее.

        { #insert-variants }
        @spoiler
            Есть перестановка из $n-2$ элементов.
            Нашу неправильную пару можно впихнуть либо в один из $n-3$ промежутков между элементами перестановки, либо до нее, либо после нее.
            Всего $n-3+2 = n-1$ "вакантных места" для нашей пары.

            Еще один пример "впихивания" смотрите в решении задачи "[Цирковое представление](task:circus)".

        Применяем [правило умножения](^productRule):

        $$ P_2 \cdot P_{n-2} \cdot (n-1) = 2 (n-1)!  $$

        Теперь из всех возможных перестановок надо вычесть найденные "неправильные":

        $$ n! - 2 (n-1)! $$

        ### Пункт б)

        Алгоритм точно такой же. $P_3$ способа расположить $a, b, c$ тройкой, $P_{n-3}$ перестановок без этих трех элементов и $(n-2)$ способов эту тройку "впихнуть" куда-то в перестановки без нее:

        $$ P_3 \cdot P_{n-3} \cdot (n-2) = 6(n-2)! $$

        Теперь из всех возможных перестановок вычитаем найденные "неправильные":

        $$ n! - 6(n-2)! $$

        ### Пункт в)
        
        Тут уже формула включений-исключений.