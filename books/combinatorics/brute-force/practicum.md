^ bf-rules @article|i:brute-force-rules

@task
    title: Орел или решка?
    statement: |
        Юля $4$ раза подряд подбросила монетку.
        Найдите все возможные результаты этих подбрасываний.
    solution: |
        В результате броска может выпасть орел или решка.
        Орел будем обозначать буквой "О", а решку "Р".
        Так мы выполнили [первое правило](^bf-rules) перебора.

        Теперь перейдем к перебору вариантов.
        Начнем с варианта, когда орел не выпал ни разу, то есть все $4$ броска выпадала только решка.
        Такой вариант всего $1$:

        $$ РРРР $$

        Теперь перечислим все варианты, когда выпал только один орел.
        Для этого по очереди заменяем "Р" на "О".

        @math
            ОРРР \\
            РОРР \\
            РРОР \\
            РРРО \\

        Заметьте, что "О" как-бы пробегает по буква "Р" справа налево.
        Всего $4$ варианта с одним орлом.

        Теперь запишем все варианты, когда выпало два орла.
        Сначала фиксируем первую "О" в начале и двигаем только вторую "О".
        Потом сдвигаем первую "О" на позицию вперед и снова двигаем только вторую.
        
        @math
            \begin{align*}
            &\textbf{О}ОРР \quad Р\textbf{О}ОР \quad РР\textbf{О}О \\
            &\textbf{О}РОР \quad Р\textbf{О}РО \\
            &\textbf{О}РРО \\
            \end{align*}

        Всего $6$ вариантов с двумя орлами.
        
        Теперь перечислим варианты с тремя орлами.
        Здесь можно сделать тот же финт, что и с одним орлом, только пробегать будет уже буква "Р".
        Получим $4$ варианта:

        $$ РООО \\ ОРОО \\ ООРО \\ ОООР $$

        Наконец, не забываем про еще один вариант, когда все $4$ раза подряд выпал орел.

        $$ ОООО $$

        Итак, всего $1 + 4 + 6 + 4 + 1 = 16$ возможных результатов.
    answer: |
        Всего $16$ возможных результатов:

        @math
            \begin{array}{}
                РРРР & ОРРР & ООРР & РООО & ОООО \\
                     & РОРР & ОРОР & ОРОО & \\
                     & РРОР & ОРРО & ООРО & \\
                     & РРРО & РООР & ОООР & \\
                     &      & РОРО &      & \\
                     &      & РРОО &      &
            \end{array}
    similar:
        -   statement: |
                Монетку подбросили $5$ раз.
                Найдите варианты подбрасываний, при которых орел выпадал $1$ или $2$ раза.
            solution: |
                Сначала разберемся с вариантами, когда орел выпал только один раз.
                Посчитать их легко, достаточно по очереди слвеа направо размещать одну букву "О".
                Всего $5$ вариантов:

                $$ ОРРРР \quad РОРРР \quad РРОРР \quad РРРОР \quad РРРРО $$
            
                Теперь слева направо размещаем уже по два орла рядом друг с другом, причем первый орел фиксируем, а второй смещаем вправо:

                @math
                    \def\arraystretch{1.2}
                    \begin{array}{}
                        \underline{О}ОРРР & Р\underline{О}ОРР & РР\underline{О}ОР & РРР\underline{О}О \\
                        \underline{О}РОРР & Р\underline{О}РОР & РР\underline{О}РО & \\
                        \underline{О}РРОР & Р\underline{О}РРО & & \\
                        \underline{О}РРРО & & &
                    \end{array}

                Это еще $10$ вариантов.
                А всего их $5 + 10 = 15$.
            answer: Всего $15$ вариантов.
        -   statement: |
                Монету подбросили $6$ раз. Найдите варианты подбрасываний, при которых орел и решка выпали одинаковое количество раз.
            solution: |
                Если орел и решка выпали одинаковое количество раз, значит они выпали ровно по три раза.
                Слева направо выписываем по три орла, фиксируем первую "О" и перебираем вправо все варианты записать оставшиеся два орла:

                @math
                    \def\arraystretch{1.2}
                    \begin{array}{c|c|c|c}
                        \begin{array}{}
                            \underline{\underline{О}}\ \underline{О}ОРРР \\
                            \underline{\underline{О}}\ \underline{О}РОРР \\
                            \underline{\underline{О}}\ \underline{О}РРОР \\
                            \underline{\underline{О}}\ \underline{О}РРРО \\\\

                            \underline{\underline{О}}\ Р\underline{О}ОРР \\
                            \underline{\underline{О}}\ Р\underline{О}РОР \\
                            \underline{\underline{О}}\ Р\underline{О}РРО \\\\

                            \underline{\underline{О}}\ РР\underline{О}ОР \\
                            \underline{\underline{О}}\ РР\underline{О}РО \\\\

                            \underline{\underline{О}}\ РРР \underline{О}О \\\\

                            \textbf{10}
                        \end{array}

                        &

                        \begin{array}{}
                            Р\ \underline{\underline{О}}\ \underline{О}ОРР \\
                            Р\ \underline{\underline{О}}\ \underline{О}РОР \\
                            Р\ \underline{\underline{О}}\ \underline{О}РРО \\\\

                            Р\ \underline{\underline{О}}\ Р\underline{О}ОР \\
                            Р\ \underline{\underline{О}}\ Р\underline{О}РО \\\\

                            Р \ \underline{\underline{О}}\ РР\underline{О}О \\\\

                            \textbf{6}
                        \end{array}

                        &

                        \begin{array}{}
                            РР\ \underline{\underline{О}}\ \underline{О}ОР \\
                            РР\ \underline{\underline{О}}\ \underline{О}РО \\\\

                            РР\ \underline{\underline{О}}\ Р\underline{О}О \\\\

                            \textbf{3}
                        \end{array}

                        &

                        \begin{array}{}
                            РРР\ \underline{\underline{О}} \ \underline{О} О \\\\
                            \textbf{1}
                        \end{array}
                    \end{array}

                Всего $10 + 6 + 3 + 1 = 20$ вариантов.
            answer: Всего $20$ вариантов.

{ #no-copy }
@task
    title: Списать не получится
    statement: |
        Для проведения экзамена создается комиссия из двух преподавателей.
        Сколько различных комиссий можно составить, если выбирать можно из пяти преподавателей?
    hint: |
        Обозначьте преподавателей цифрами.<br>
        Перебирайте пары цифр по возрастанию чисел.
    solution: |
        Для удобства пронумеруем преподавателей:

        $$ 1, \ 2, \ 3, \ 4, \ 5 $$

        Таким образом мы выполнили [первое правило](^bf-rules) прямого перебора и свели задачу к нахождению всех возможных пар цифр из списка выше.
        Теперь нужно выполнить второе правило перебора -- придумать удобный алгоритм перебора.
        Так как мы работаем с числами, логично будет перебирать их по возрастанию:

        @math
            \begin{array}{}
                12 & 13 & 14 & 15
                \\
                & 23 & 24 & 25
                \\
                && 34 & 35
                \\
                &&& 45
            \end{array}

        Всего $10$ вариантов.
    answer: $10$
    similar:
        -   statement: |
                А сколько комиссий можно составить, если в нее должно входить $3$ преподавателя, а всего их $5$?
            solution: |
                Действуем по той же схеме, перебираем по возрастанию, но фиксируем номера первых двух преподавателей и перебираем третьего:

                @math
                    \def\arraystretch{1.25}
                    \begin{array}{}
                        123 & 124 & 125
                        \\
                        & 134 & 135
                        \\
                        && 145
                        \\ \hline
                        & 234 & 235
                        \\
                        && 245
                        \\ \hline
                        && 345
                    \end{array}

            answer: $10$

@task
    title: Испытание харизмы
    statement: |
        Артем играет с друзьями в настольную ролевую игру.
        Он повстречал сильного монстра.
        Чтобы убедить монстра не нападать, Артем должен бросить сразу два игральных кубика и получить в сумме не меньше $9$ очков.
        Найдите все такие удачные броски.
    hint: |
        Постройте таблицу бросков.
        В ячейки таблицы запишите сумму очков броска.
    solution: |
        Каждый бросок можно описать парой чисел: первое это количество очков на первом кубике, второе -- на втором.
        Например, бросок $(2,6)$ означает, что на первом кубике выпало $2$ очка, а на втором $6$.
        Введя такие обозначения мы выполнили первое [правило перебора](^bf-rules).

        Для выполнения второго правила перебора и удобного перебора бросков составим таблицу.
        Номер строки соответствуют количеству очков на первом кубике, а номер столбца -- очкам на втором.
        В самих ячейках запишем сумму очков:

        @math
            \def\arraystretch{1.25}
            \begin{array}{c|}
                  & 1 & 2 & 3 & 4 & 5 & 6 \\ \hline
                1 & 2 & 3 & 4 & 5 & 6 & 7 \\
                2 & 3 & 4 & 5 & 6 & 7 & 8 \\
                3 & 4 & 5 & 6 & 7 & 8 & \blue{9} \\
                4 & 5 & 6 & 7 & 8 & \blue{9} & \blue{10} \\
                5 & 6 & 7 & 8 & \blue{9} & \blue{10} & \blue{11} \\
                6 & 7 & 8 & \blue{9} & \blue{10} & \blue{11} & \blue{12}
            \end{array}

        В таком представлении сразу видны все броски, которые в сумме дают не меньше $9$ очков:

        @math
            \def\arraystretch{1.25}
            \begin{array}{}
                (3, 6) & (4, 5) & (5, 4) & (6, 3) \\
                (4, 6) & (5, 5) & (6, 4) \\
                (5, 6) & (6, 5) \\
                (6, 6)
            \end{array}
    answer: |
        У Артема есть $10$ шансов из $36$ на убеждение монстра:

        @math
            \def\arraystretch{1.25}
            \begin{array}{}
                (3, 6) & (4, 5) & (5, 4) & (6, 3) \\
                (4, 6) & (5, 5) & (6, 4) \\
                (5, 6) & (6, 5) \\
                (6, 6)
            \end{array}
    similar:
        -   statement: |
                Игральный кубик дважды подбрасывают.
                Потом еще раз, еще и так далее...
                Какие произведения очков будут выпадать чаще?
                А какие реже?
            hint: |
                Чем больше способов получить произведение очков, тем чаще оно встречается.
            solution: |
                Построим таблицу всех возможных произведений очков:

                @math
                    \def\arraystretch{1.25}
                    \begin{array}{c|}
                          & 1 & 2 & 3 & 4 & 5 & 6 \\ \hline
                        1 & 1 & 2 & 3 & 4 & 5 & 6 \\
                        2 & 2 & 4 & 6 & 8 & 10 & 12 \\
                        3 & 3 & 6 & 9 & 12 & 15 & 18 \\
                        4 & 4 & 8 & 12 & 16 & 20 & 24 \\
                        5 & 5 & 10 & 15 & 20 & 25 & 30 \\
                        6 & 6 & 12 & 18 & 24 & 30 & 36
                    \end{array}

                В таблице все значения дублируются вдоль диагонали, поэтому для упрощения поиска оставим только диагональ и одну половину:

                @math
                    \def\arraystretch{1.25}
                    \begin{array}{c|}
                          & 1 & 2 & 3 & 4 & 5 & 6 \\ \hline
                        1 & 1 &  &  &  &  &  \\
                        2 & 2 & 4 &  &  &  &  \\
                        3 & 3 & 6 & 9 & & & \\
                        4 & 4 & 8 & 12 & 16 & & \\
                        5 & 5 & 10 & 15 & 20 & 25 & \\
                        6 & 6 & 12 & 18 & 24 & 30 & 36
                    \end{array}

                Отсюда находим, что чаще всего встречаются произведения $6$ и $12$, они встречаются в таблице $4$ раза.
                Самые редкие произведения всегда лежат на диагонали: $1$, $9$, $16$, $25$ и $36$ -- по одному разу в таблице.
            answer: |
                Чаще всего будут выпадать произведения $6$ и $12$, а реже всего: $1$, $9$, $16$, $25$ и $36$.

@todo
    title: Генерирующиеся задачи на погоду
    content: |
        В профильном ЕГЭ по математике есть неплохие задачи на погоду.
        Их можно взять за основу.
        Генерить можно количество дней, на протяжении которых погода может меняться.
        Погоды лучше сделать три, чтобы усложнить перебор.

@task
    title: Невероятная семерка
    statement: |
        Найдите все трехзначные числа, сумма цифр которых равна $7$.
    solution: |
        Числа коротко записываются и хорошо друг от друга отличаются.
        Нет нужны давать им уникальные обозначения.
        Поэтому первый пункт из [правил перебора](^bf-rules) автоматически выполнен.

        А вот с алгоритмом перебора сложнее.
        Если немного прикинуть, подобрать пару таких чисел, то быстро становится понятно, что их много.
        Значит нужно выписывать так, чтобы было удобно получать следующее число, и в то же время не допустить пропусков или повторений.

        Разделим все трехзначные числа на $7$ столбиков.
        Первый столбик состоит из чисел, которые начинаются на цифру $7$.
        Такое число только одно:

        $$ 700 $$

        Во втором столбце все числа, которые начинаются с цифры $6$.
        При этом оставшиеся две цифры в сумме должны дать $1$, чтобы $6 + 1 = 7$.

        @math
            \begin{matrix}
                700 & 601
                \\
                & 610
            \end{matrix}

        Обратите внимание, что при движении вниз по столбцу (из $601$ в $610$) вторая цифра увеличивается на единицу ($0$ в $1$), а третья уменьшается ($1$ в $0$).
        Продолжаем строить столбцы по такой же схеме:

        @math
            \begin{matrix}
            700 & 601 & 502 & 403 & 304 & 205 & 106
            \\
                & 610 & 511 & 412 & 313 & 214 & 115
            \\
                &     & 520 & 421 & 322 & 223 & 124
            \\
                &     &     & 430 & 331 & 232 & 133
            \\
                &     &     &     & 340 & 241 & 142
            \\
                &     &     &     &     & 250 & 151
            \\
                &     &     &     &     &     & 160
            \end{matrix}

        Всего мы нашли $34$ трехзначных числа, сумма цифр которых равна $7$.
    answer: |
        Всего $34$ числа:

        @math
            \begin{matrix}
                700 & 601 & 502 & 403 & 304 & 205 & 106
                \\
                    & 610 & 511 & 412 & 313 & 214 & 115
                \\
                    &     & 520 & 421 & 322 & 223 & 124
                \\
                    &     &     & 430 & 331 & 232 & 133
                \\
                    &     &     &     & 340 & 241 & 142
                \\
                    &     &     &     &     & 250 & 151
                \\
                    &     &     &     &     &     & 160
            \end{matrix}

@task
    title: Степенной ряд
    statement: |
        Из списка $\set{1, 2, 3, 4}$ выбираются три различных числа $a, b, c$.
        Сколько существует способов сделать это так, чтобы число $a^{\left(b^c\right)}$ делилось на $4$?
    hint: |
        Используйте дерево вариантов.
    solution: |
        Будем решать с помощью дерева вариантов.
        Числа $1$ и $3$ в какую степень ни возводи, на $4$ делиться они не будут.
        Поэтому первыми можно выбрать только числа $2$ и $4$:

        @image
            src: assets/practicum/power-tree-step-1.svg
            width: 200px
            invert: dark

        Далее работаем с левой веткой.
        Число $2$ нельзя возвести в степень $1$, потому что в противном случае в результате получим $2$, которое не делится на $4$.
        Поэтому вторым числом после $2$ можно выбрать только числа $3$ или $4$. А дальше уже без разницы, в какую степень их возводить:

        @image
            src: assets/practicum/power-tree-step-2.svg
            width: 350px
            invert: dark
        
        С правой сторой дерева все совсем просто.
        Никаких огранчений нет.
        Аккуратно строим оставшиеся ветки:

        @image
            src: assets/practicum/power-tree-full.svg
            width: 500px
            invert: dark

        Итак, всего есть $10$ способов выбрать три числа так, чтобы выполнялось условие задачи.
    answer: |
        $10$

@task
    title: Цифровой хоровод
    statement: |
        Можно ли выписать девять чисел $1, 2, \ldots, 9$ по кругу так, чтобы сумма никаких двух соседних чисел не делилась ни на $3$, ни на $5$, ни на $7$?
    hint: |
        Используйте дерево вариантов.
        На одном листе рисуйте дерево, на других листах проводите вычисления и проверки на деление.
    solution: |
        Решать эту задачу мы будем через построение дерева вариантов.
        Так как числа выписаны по кругу, то нет никакой разницы, с какого числа начинать.
        Начнем с числа $3$.
        Найдем всех подходящих ему соседей:

        @math
            \begin{array}{r}
                \textbf{3} \ + & 1 & 2 & 4 & 5 & 6 & 7 & 8 & 9 \\
                =     & 4 & 5 & 7 & 8 & 9 & 10 & 11 & 12 \\
                      & + & - & - & + & - & - & + & -
            \end{array}

        Рядом с цифрой $3$ можно поставить цифры $1, 5$ и $8$.
        Отображаем эти данные на дереве:

        @image
            src: assets/practicum/numbers-circle-tree-step-1.svg
            width: 200px
            invert: dark

        Можно выбрать любую ветку для продолжения.
        Для простоты будем всегда выбирать ветку с наименьшим числом.
        В данном случае это ветка с цифрой $1$.
        Ищем всех соседей для цифры $1$, не забывая, что цифру $3$ мы уже использовали:

        @math
            \begin{array}{r}
                3, \ \textbf{1} \ + & 2 & 4 & 5 & 6 & 7 & 8 & 9 \\
                =          & 3 & 5 & 6 & 7 & 8 & 9 & 10 \\
                           & - & - & - & - & + & - & -
            \end{array}

        Итак, продолжить ветку с цифрой $1$ можем только веткой с цифрой $7$.
        Рисуем ее на дереве:

        @image
            src: assets/practicum/numbers-circle-tree-step-2.svg
            width: 250px
            invert: dark

        Ну и так далее. Ищем соседей, рисуем ветки, выбираем наименьшую, ищем соседей, рисуем ветки...
        Некоторые ветки будет невозможно продолжить.
        Тогда откатываемся и продолжаем с предыдущими вариантами.

        У меня получилось вот такое дерево:

        @image
            src: assets/practicum/numbers-circle-tree-full.svg
            width: 500px
            invert: dark

        Не забываем проверить, чтобы сумма последнего числа (у меня это $8$) с самым первым (у меня это $3$) тоже удовлетворяла условию задачи, ведь цифры на самом деле записываются по кругу, так что $3$ и $8$ это тоже соседи!
        
        Выписываем подряд все цифры в получившейся финальной ветке и получаем ответ к задаче:

        $$ 3, 1, 7, 4, 9, 2, 6, 5, 8 $$

    answer: |
        Выписать числа таким образом можно. Пример:

        $$ 3, 1, 7, 4, 9, 2, 6, 5, 8 $$

@task
    title: Великий стратег
    statement: |
        В компьютерной стратегии игровая карта разбита на сетку из регионов размером $3 \times 3$.
        В начале игры под контроль игрока выдаются три случайных региона.
        Сколько всего есть различных сценариев начала игры?
    hint: |
        Нарисуйте таблицу, фиксируйте по два региона под контролем игрока и считайте количество способов выбрать третий регион.
    solution: |
        Итак, имеем таблицу регионов размерами $3 \times 3$.
        Подконтрольные игроку регионы будем обозначать $x$.
        Первое [правило](^bf-rules) перебора выполнено.

        Начнем с варианта, когда под контролем игрока оказываются первые два региона:

        @math
            \def\arraystretch{1.25}
            \begin{array}{c|c|c}
                x & x & \phantom{x} \\ \hline
                \phantom{x} & \phantom{x} & \phantom{x} \\ \hline
                \phantom{x} & \phantom{x} & \phantom{x} \\
            \end{array}

        Осталось выбрать еще один регион для игрока среди пустых ячеек таблицы.
        При таком стартовом расположении есть $7$ вариантов указать третий регион игрока.

        Второй $x$ смещаем на клетку вправо, а его предыдущее местоположение отмечаем точкой "$\cdot$":

        @math
            \def\arraystretch{1.25}
            \begin{array}{c|c|c}
                x & \cdot & x \\ \hline
                \phantom{x} & \phantom{x} & \phantom{x} \\ \hline
                \phantom{x} & \phantom{x} & \phantom{x} \\
            \end{array}

        Получаем всего $6$ варинатов указать третий регион для игрока.
        Поставить третий $x$ вместо точки нельзя, ведь тогда мы получим один из уже рассмотреных ранее семи вариантов.

        Смещаем второй $x$ еще дальше, не забывая точкой отметить его предыдущее положение:

        @math
            \def\arraystretch{1.25}
            \begin{array}{c|c|c}
                x & \cdot & \cdot \\ \hline
                x & \phantom{x} & \phantom{x} \\ \hline
                \phantom{x} & \phantom{x} & \phantom{x} \\
            \end{array}

        Теперь осталось всего $5$ вариантов указать третий регион.
        Продолжая в том же духе можем найти все варианты начала игры, когда в левом верхнем углу таблицы стоит $x$:

        $$ 7 + 6 + 5 + 4 + 3 + 2 + 1 = 28 $$

        ---

        Мы перебрали все возможные варианты старта игры, когда в первой ячейке таблицы находится $x$.
        Теперь смещаем вправо уже этот самый **первый** $x$:

        @math
            \def\arraystretch{1.25}
            \begin{array}{c|c|c}
                \cdot & x & x \\ \hline
                \phantom{x} & \phantom{x} & \phantom{x} \\ \hline
                \phantom{x} & \phantom{x} & \phantom{x} \\
            \end{array}

        Имеем $6$ вариантов для третьего $x$.
        Далее опять повторяем ту же самую стратегию с постепенным смещением второго $x$:

        @math
            \def\arraystretch{1.25}
            \begin{array}{c|c|c}
                \cdot & x & \cdot \\ \hline
                x & \phantom{x} & \phantom{x} \\ \hline
                \phantom{x} & \phantom{x} & \phantom{x} \\
            \end{array}
            
            \qquad

            \def\arraystretch{1.25}
            \begin{array}{c|c|c}
                \cdot & x & \cdot \\ \hline
                \cdot & x & \phantom{x} \\ \hline
                \phantom{x} & \phantom{x} & \phantom{x} \\
            \end{array}

            \qquad

            \def\arraystretch{1.25}
            \begin{array}{c|c|c}
                \cdot & x & \cdot \\ \hline
                \cdot & \cdot & x \\ \hline
                \phantom{x} & \phantom{x} & \phantom{x} \\
            \end{array}

        Получили цепочку из сложений, но с началом уже с $6$, а не с $7$:

        $$ 6 + 5 + 4 + 3 + 2 + 1 = 21 $$

        Итак, каждое смещение **первого** $x$ уменьшает цепочку из сложений.
        Осталось только посчитать, сколько же всего есть различных сценариев начала игры:

        @math
            \begin{align*}
            7 + 6 + 5 + 4 + 3 + 2 + 1 &= 28 \\
            6 + 5 + 4 + 3 + 2 + 1 &= 21 \\
            5 + 4 + 3 + 2 + 1 &= 15 \\
            4 + 3 + 2 + 1 &= 10 \\
            3 + 2 + 1 &= 6 \\
            2 + 1 &= 3 \\
            1 &= 1 \\
            \end{align*}

        $$ 28 + 21 + 15 + 10 + 6 + 3 + 1 = \textbf{84} $$
    answer: $84$

@task
    title: Квадратные раскраски
    statement: |
        На клетчатой бумаге нарисован квадрат размером $3 \times 3$ клеточки.
        Требуется закрасить в этом квадрате три клеточки так, чтобы никакие две закрашенные клеточки не имели общей стороны.
        Сколькими способами это можно сделать?
        Два способа раскраски считаются одинаковыми, если один можно получить из другого поворотом квадрата.
    hint: |
        Разбейте все возможные раскраски на группы по положению самой первой закрашенной клетки.
        Активно отбрасывайте лишние варианты перебора, если их можно совместить через поворот квадрата.
    solution: |
        Все возможные раскраски разделим на группы по положению самой первой закрашенной клетки.

        ### Центральные закраски

        Во всех этих раскрасках первой будет закрашена центральная клетка.

        @math
            \def\arraystretch{1.4}
            \begin{array}{c|c|c}
                \phantom{\blacksquare} & \cdot & \\ \hline
                \cdot & \blacksquare & \cdot \\ \hline
                & \cdot & \phantom{\blacksquare}
            \end{array}

        Единственный возможный следующий шаг -- закрасить какую-то угловую клетку.
        Какую именно, без разницы, так как эту разницу можно будет устранить поворотом квадрата.
        Поэтому закрасим правую нижнюю:
    
        @math
            \def\arraystretch{1.4}
            \begin{array}{c|c|c}
                \phantom{\blacksquare} & \cdot & \\ \hline
                \cdot & \blacksquare & \cdot \\ \hline
                & \cdot & \blacksquare
            \end{array}

        Осталось закрасить третью клетку.
        Без учета повторяющихся вариантов, которые накладываются друг на друга повотором, сделать это можно только двумя способами.
        Это и есть наши первые две раскраски: "внутреннему треугольнику" и "диагонали".

        @math
            \def\arraystretch{1.4}
            \begin{array}{c|c|c}
                \phantom{\blacksquare} &  & \\ \hline
                 & \blue{\blacksquare} & \\ \hline
                \blue{\blacksquare} & & \blue{\blacksquare}
            \end{array}

            \qquad

            \begin{array}{c|c|c}
                \blue{\blacksquare} &  & \\ \hline
                 & \blue{\blacksquare} &  \\ \hline
                &  & \blue{\blacksquare}
            \end{array}

        Итак, мы нашли **все** $2$ возможные раскраски квадарата, которые начинаются с центральной клетки.

        ### Боковые раскраски

        Эти раскраски будут начинаться с боковой неугловой клетки.
        Возможных расположений тут $4$, но все они абсолютно одинаковые, потому что совмещаются поворотом квадрата.
        Начнем слева:

        @math
            \def\arraystretch{1.4}
            \begin{array}{c|c|c}
                \cdot & & \phantom{\blacksquare} \\ \hline
                \blacksquare & \cdot & \\ \hline
                \cdot & \phantom{\blacksquare}  & \phantom{\blacksquare}
            \end{array}

        Без учета получаемых поворотом одинаковых вариантов есть $4$ способа закрасить вторую клетку:

        @math
            \def\arraystretch{1.4}
            \begin{array}{c|c|c}
                \cdot & \blacksquare & \cdot \\ \hline
                \blacksquare & \cdot & \\ \hline
                \cdot & \phantom{\blacksquare}  & \phantom{\blacksquare}
            \end{array}

            \qquad

            \begin{array}{c|c|c}
                \cdot & \cdot & \blacksquare \\ \hline
                \blacksquare & \cdot & \cdot \\ \hline
                \cdot & \phantom{\blacksquare}  & \phantom{\blacksquare}
            \end{array}

            \qquad

            \begin{array}{c|c|c}
                \cdot & \phantom{\blacksquare} &  \\ \hline
                \blacksquare & \cdot & \cdot \\ \hline
                \cdot & \cdot & \blacksquare
            \end{array}

            \qquad

            \begin{array}{c|c|c}
                \cdot & \phantom{\blacksquare}  & \cdot \\ \hline
                \blacksquare & \cdot & \blacksquare \\ \hline
                \cdot & \phantom{\blacksquare}  & \cdot
            \end{array}

        Проще всего разобраться сначала с последним вариантом.
        В нем только один вариант завершить раскраску (без учета поворотов), который назовем "внешним треугольником".

        @math
            \def\arraystretch{1.4}
            \begin{array}{c|c|c}
                \cdot & \phantom{\blacksquare}  & \cdot \\ \hline
                \blacksquare & \cdot & \blacksquare \\ \hline
                \cdot & \phantom{\blacksquare}  & \cdot
            \end{array}

            \qquad
            \Rightarrow
            \qquad

            \begin{array}{c|c|c}
                 & \blue{\blacksquare}  &  \\ \hline
                \blue{\blacksquare} & & \blue{\blacksquare} \\ \hline
                 & \phantom{\blacksquare} & 
            \end{array}

        Теперь разберемся с первым вариантом.
        В нем есть три варианта завершить раскраску, два из которых приведут к уже известному "внешнему треугольнику", а последний к новой раскраске -- "угловому треугольнику":

        @math
            \def\arraystretch{1.4}
            \begin{array}{c|c|c}
                \cdot & \blacksquare & \cdot \\ \hline
                \blacksquare & \cdot & \\ \hline
                \cdot & \phantom{\blacksquare}  & \phantom{\blacksquare}
            \end{array}

            \qquad
            \Rightarrow
            \qquad

            \begin{array}{c|c|c}
                 & \blue{\blacksquare} & \\ \hline
                \blue{\blacksquare} & & \\ \hline
                 &  & \blue{\blacksquare}
            \end{array}

        Наконец, второй и третий варианты, которые являются вертикальными отражениями друг друга.
        Их оба можно завершить двумя способами.
        Один приведет к "угловому треугольнику", а второй даст новую раскраску -- "большой треугольник":

        @math
            \def\arraystretch{1.4}
            \begin{array}{c|c|c}
                \cdot & \cdot & \blacksquare \\ \hline
                \blacksquare & \cdot & \cdot \\ \hline
                \cdot & \phantom{\blacksquare}  & \phantom{\blacksquare}
            \end{array}

            \qquad
            \Rightarrow
            \qquad

            \begin{array}{c|c|c}
                 & & \blue{\blacksquare} \\ \hline
                \blue{\blacksquare} & \phantom{\blacksquare}  & \\ \hline
                 &  & \blue{\blacksquare}
            \end{array}

        Итак, мы нашли **все** $3$ возможные раскраски квадарата, которые начинаются с боковой неугловой клетки.

        ### Угловая раскраска

        Осталось рассмортеть закраски, начинающиеся с клетки в углу квадрата.
        Тут как и в боковых закрасках $4$ возможных ничего друг от друга не отличающихся варианта старта:

        @math
            \def\arraystretch{1.4}
            \begin{array}{c|c|c}
                \blacksquare & \cdot & \phantom{\blacksquare} \\ \hline
                \cdot &  & \\ \hline
                 & \phantom{\blacksquare}  & \phantom{\blacksquare}
            \end{array}

        Без учета поворотов получаем аж $5$ вариантов закрасить вторую клетку.
        Но не страшитесь, они быстро себя исчерпают:

        @math
            \def\arraystretch{1.4}
            \begin{array}{c|c|c}
                \blacksquare & \cdot & \phantom{\blacksquare} \\ \hline
                \cdot & \blacksquare & \cdot \\ \hline
                 & \cdot  & \phantom{\blacksquare}
            \end{array}

            \qquad

            \begin{array}{c|c|c}
                \blacksquare & \cdot & \phantom{\blacksquare} \\ \hline
                \cdot & \phantom{\blacksquare} & \cdot \\ \hline
                 & \cdot  & \blacksquare
            \end{array}

            \qquad

            \begin{array}{c|c|c}
                \blacksquare & \cdot & \blacksquare \\ \hline
                \cdot & \phantom{\blacksquare} & \cdot \\ \hline
                \phantom{\blacksquare} & \phantom{\blacksquare}  & \phantom{\blacksquare}
            \end{array}

            \qquad

            \begin{array}{c|c|c}
                \blacksquare & \cdot & \cdot \\ \hline
                \cdot & \cdot & \blacksquare \\ \hline
                 & \phantom{\blacksquare}  & \cdot
            \end{array}

            \qquad

            \begin{array}{c|c|c}
                \blacksquare & \cdot &  \\ \hline
                \cdot & \cdot & \phantom{\blacksquare} \\ \hline
                \cdot & \blacksquare  & \cdot
            \end{array}

        Первый вариант уже был в разделе центральных раскрасок.
        Ничего нового он не даст.

        Второй вариант можно завершить двумя способами.
        Один приведет уже к известной "диагонали", а второй даст новую раскраску -- "уголок":

        @math
            \def\arraystretch{1.4}
            \begin{array}{c|c|c}
                \blacksquare & \cdot & \phantom{\blacksquare} \\ \hline
                \cdot & \phantom{\blacksquare} & \cdot \\ \hline
                 & \cdot  & \blacksquare
            \end{array}

            \qquad
            \Rightarrow
            \qquad

            \begin{array}{c|c|c}
                \blue{\blacksquare} &  & \blue{\blacksquare} \\ \hline
                & \phantom{\blacksquare} & \\ \hline
                 &  & \blue{\blacksquare}
            \end{array}

        Третий вариант сводится к "уголку", "внутреннему треугольнику" или "большому треугольнику".
        Ничего нового.

        Четвертый и пятый варианта оба сводятся либо к "угловому треугольнику" или к "большому треугольнику".
        Ничего нового.

        Итак, угловые раскраски дали нам всего одну новую раскраску.

        ### Итог

        Всего мы нашли $6$ полноценных раскрасок квадрата.

    answer: |
        Всего $6$ возможных раскрасок.

@task
    title: Комбинаторные авиалинии
    statement: |
        В стране четыре города: "А", "Б", "В" и "Г".
        Их хотят связать тремя авиалиниями так, чтобы из каждого города можно было (возможно, с пересадками) долететь до любого другого.
        Сколькими различными способами это можно сделать?
    solution: |
        Сначала разберем вариант, когда один из городов становится своеобразным "центром" и все три авиалинии идут от него к оставшимся городам.
        Любой из четырех городов может быть таким "центром", поэтому получаем $4$ способа проложить авиалинии.

        Пусть теперь из города выходят не три авиалинии, а всего две.
        Назовем такой город дву-центром.
        В этом случае у нас связаны три города и один остается отрезан.
        Из отрезанного города нужно проложить последнюю авиалинию.
        Сделать это можно тремя способами.

        Если провести последнюю авиалинию к дву-центру, то получится три-центр, но все варианты с три-центрами мы уже рассмотрели в начале решения.
        Два других варианта неизбежно приведут к образованию еще одного дву-центра.
        Получается, не может быть только один дву-центр.
        Всегда будет пара связанных друг с другом дву-центров.
        
        Найдем все возможные уникальные пары двух городов.
        Для упрощения этой задачи будем фиксировать первый город и перебирать все варинаты второго:

        $$ АБ \quad АВ \quad АГ \\ БВ \quad БГ \\ ВГ $$

        Всего $6$ возможных пар.
        Они же и являются всеми возможными парами дву-центров.
        Одна авиалиния уже проложена между двумя городами в паре.
        Остается еще две авиалинии.
        Так как речь идет о дву-центрах, то каждый город из пары должен иметь еще одну авиалинию:

        @math
            В-\textbf{АБ}-Г \qquad Г-\textbf{АБ}-В \\
            Б-\textbf{АВ}-Г \qquad Г-\textbf{АВ}-Б \\
            \cdots

        Получается, что каждую из $6$ пар дву-центров можно завершить $2$ способами.
        Всего $6\cdot 2 = 12$ способов проложить авиалинии с дву-центрами.

        А есть ли варианты проложить авиалинии без три-центров и без дву-центров?
        Представим, что проложена авиалиния между городами $Г_1$ и $Г_2$.
        Представим ситуацию, что гражданин хочет попасть из города $Г_1$ в город $Г_3$.
        В данный момент он этого сделать не может, что противоречит условию задачи.
        Придется класть еще одну авиалинию либо из города $Г_1$, либо из $Г_2$, но любое из этих двух действий создаст дву-центр.

        Итак, невозможно проложить авиалинии без три-центра или без дву-центров.
        Значит, всего существует $4+12 = 16$ способов проложить три авиалинии между четырьмя городами.

    answer: |
        $16$

@task
    title: Ставки на спорт!
    statement: |
        В соревнованиях по хоккею участвовали пять команд: $A, B, C, D, E$.
        В конкурсе знатоков один участник предположил, что они займут места в порядке $A, B, C, D, E$, а другой предсказал порядок $D, A, E, C, B$.
        
        После окончания соревнований оказалось, что первый не угадал не только место хотя бы одной из команд, но даже какую-либо пару следующих друг за другом команд.
        Второй же угадал места двух команд и две пары следующих друг за другом команд.
        В каком порядке расположитилсь команды?
    hint: |
        Как основу для перебора используйте тот факт, что второй знаток правильно угадал "две пары следующих друг за другом команд".
    solution: |
        Из условия нам известно, что второй знаток правильно угадал "две пары следующих друг за другом команд".
        Обозначим первую пару команд за $XY$, а вторую за $NM$.
        Всего существует $3$ "шаблона" расположить эти команды:

        $$ 1) \ XY|NM|? \qquad 2) \ XY|?|NM \qquad 3) \ ?|XY|NM $$

        Вместо знаков вопроса стоит буква еще одной недостающей команды.
        Но это еще не все. Может получиться так, что знаток угадал порядок трех команд.
        Такой вариант не противоречит условию.
        Поэтому к "шаблонам" выше добавляются еще три варианта:

        $$ 4) \ XYZ|?? \qquad 5) \ ?|XYZ|? \qquad 6) \ ??|XYZ $$

        ### Тройное совпадение

        Разберемся сначала с последними тремя шаблонами, то есть с ситуацией, когда второй знаток угадал порядок сразу три команды.
        Еще раз обратите внимание на его предсказание:

        $$ DAECB $$

        Из этого предсказания можно выделить только три тройки идущих друг за другом команд:

        $$ \undergroup{DAE}CB \qquad D\undergroup{AEC}B \qquad DA\undergroup{ECB} $$

        По условию так же известно, что второй знаток угадал места двух команд.
        Тут может быть только два возможных варианта:

        @list
            type: ol
            items:
                - |
                    Одно или оба отгаданных места команд попали в им же угаданную тройку.
                    Так как порядок команд в тройке поменяться не может мы получаем, что он угадал **и порядок, и места** всех **трех** команд в тройке.
                    Но это противоречит условию, согласно которому он угадал места **только двух** команд.
                - |
                    Ни одно из угаданных мест не попало в тройку.
                    В этом случае у нас вне тройки фиксируются две конкретные буквы на конкретных местах.
                    Саму тройку менять и двигать нельзя, зафиксированные буквы тоже, поэтому тут даже перебирать нечего:

                    $$ \undergroup{DAE}\textbf{CB} \qquad \textbf{D}\undergroup{AEC}\textbf{B} \qquad \textbf{DA}\undergroup{ECB} $$

                    В распоряжении остается только исходное предсказание второго знатока, $DAECB$, про которое известно, что оно неверное.

        Итак, шаблоны $4,5$ и $6$ проверять не имеет смысла, так как второй знаток не мог угадать порядок сразу тех команд.

        ### Две разные пары

        Разберемся теперь с первыми тремя шаблонами:

        $$ 1) \ XY|NM|? \qquad 2) \ XY|?|NM \qquad 3) \ ?|XY|NM $$

        В этих шаблонах мы можем использовать две разные пары команд.
        Найдем все возможные пары из предсказания второго знатока:

        $$ \undergroup{DA}ECB \qquad D\undergroup{AE}CB \qquad DA\undergroup{EC}B \qquad DAE\undergroup{CB} $$

        Подставляем эти пары их **по очереди** и проверяем, подходят ли получившиеся комбинации команд под оба условия задачи.

        @math
            \def\arraystretch{1.25}
            \begin{array}{}
                \text{Шаблон 1} & \text{Шаблон 2} & \text{Шаблон 3}
                \\\hline
                DA|EC|B & DA|B|EC & B|DA|EC \\
                DA|CB|E & DA|E|CB & \blue{E|DA|CB} \\
                AE|CB|D & AE|D|CB & D|AE|CB \\
                EC|DA|B & EC|B|DA & B|EC|DA \\
                CB|DA|E & CB|D|AE & E|CB|DA \\
                CB|AE|D & CB|E|DA & D|CB|AE
            \end{array}

        Итак, мы нашли единственный вариант, в котором могли расположиться команды:

        $$ EDACB $$
    answer: |
        $ EDACB $

{ #dictionary }
@task
    title: Пятибуквенный словарь
    tags:
        - ЕГЭ Информатика
    statement: |
        Василий составил список всех $5$-буквенных слов, которые можно составить из букв "А", "Б", "В".
        Буквы записываются в алфавитном порядке.
        Вот начало списка:

        1. ААААА
        2. ААААБ
        3. ААААВ
        4. АААБА
        5. АААББ

        Запишите слово, которое стоит на $150$-м месте в этом списке.
    hint: |
        Посчитайте, сколько раз поменяется пятая буква на пути к $150$-му слову.
        Для определения букв используйте остатки от деления на $3$.
    solution: |
        Задачу можно решить двумя способами: напрямую или через системы счисления.
        Вариант со системами счислений более короткий, но кто-то может быть с ними не знаком.
        Вариант напрямую более объемный, но его точно поймут все.

        ### Решение через системы счисления

        Слова составляются из трех букв.
        Пронумеруем буквы: "А" станет $0$, "Б" -- $1$, а "В" -- $2$.
        Тогда список приобретает следующий вид:

        1. $00000$
        2. $00001$
        3. $00002$
        4. $00010$
        5. $00011$

        Это уже не список слов, а **список чисел** в троичной системе счисления.
        Заметьте, что первым в списке идет число $0$, вторым идет число $1$ и так далее.
        То есть троичное число **на единицу** меньше своей позиции в списке!

        Нам нужно узнать, что за число стоит на $150$-м месте в списке.
        На этом месте стоит троичная запись числа $149$.
        [Переводим](spoiler:transform-to-three) это число в троичную систему:

        $$ 149_{10} = 12112_{3} $$

        Заменяем цифры на соответствующие буквы и получаем ответ:

        $$ БВББВ $$

        { #transform-to-three }
        @spoiler
            Для того, чтобы перевести десятичное число в троичное, нужно просто делить это число на $3$ и выписывать остатки от деления в обратном порядке:

            @math
                \begin{align*}
                    149 : 3 = 49 \cdot 3 + \textbf{2}& \\
                    49 : 3 = 16 \cdot 3 + \textbf{1}& \\
                    16 : 3 = 5 \cdot 3 + \textbf{1}& \\
                    5 : 3 = 1 \cdot 3 + \textbf{2}& \\
                    1 : 3 = 0 \cdot 3 + \textbf{1}&
                \end{align*}



        ### Решение напрямую

        В этой задаче Василий придумал алгоритм перебора слов и тем самым выполнил [второе правило](^bf-rules) перебора.
        Так он смог получить список из всех слов.
        Нам же нужно детально разобрать этот алгоритм и найти способ нахождения конкретного слова по его номеру в списке.

        Обратите внимание на последнюю, $5$-ю букву.
        Она постоянно меняется.
        В списке из $150$ слов последняя буква изменилась $149$ раз, на единицу меньше, чем количество слов, ведь первое слово уже было дано и никак не изменялось:

        @math
            \begin{array}{}
                \overbrace{\text{ААААА}}^{Слово \ 1} & & \overbrace{\text{ААААБ}}^{Слово \ 2} & \cdots & \overbrace{\text{?????}}^{Слово \ 149} & & \overbrace{\text{?????}}^{Слово \ 150} \\
                & \underbrace{\text{A} \Rightarrow \text{Б}}_{\text{Замена 1}} & & \underbrace{\text{Б} \Rightarrow \text{В}}_{\text{Замена 2}} & \dots & \underbrace{\text{?} \Rightarrow \text{?}}_{\text{Замена 149}} &
            \end{array}

        Если мы начинаем с буквы "A", то какая же буква будет после $149$ замен?
        Для удобства построим таблицу:

        @math
            \begin{array}{r|ccc|ccc|c|}
                \text{Буква} & \text{А} & \text{Б} & \text{В} & \text{А} & \text{Б} & \text{В} & \cdots & ? \\
                \text{Замена} & 0 & 1 & 2 & 3 & 4 & 5 & \cdots & 149
            \end{array}

        Замечаем, что номера замены с буквой "А" делятся нацело на $3$: $0/3, 3/3, \ldots$<br>
        Номера замены с буквой "Б" при делении на $3$ дают остаток $1$: $1/3, 4/3, \ldots$<br>
        Наконец, номера замены с буквой "В" при делении на $3$ дают остаток $2$: $2/3, 5/3, \ldots$<br>

        Теперь мы можем узнать, что будет после $149$ замен.
        Делим $149$ на $3$ и получаем остаток $2$.
        Мы уже выяснили, что остаток $2$ связан с буквой "В".
        Значит, после $149$ замен буква "A" станет буквой "В".

        @math
            \begin{array}{r|ccc|ccc|c|}
                \text{Буква} & \text{А} & \text{Б} & \text{В} & \text{А} & \text{Б} & \text{В} & \cdots & \text{В} \\
                \text{Замена} & 0 & 1 & 2 & 3 & 4 & 5 & \cdots & 149 \\
                \text{Остаток} & 0 & 1 & 2 & 0 & 1 & 2 & \cdots & 2
            \end{array}

        Итак, у слова на $150$-м месте в списке последняя буква это "В":

        $$ \boxed{ ? \ ? \ ? \ ? \ \text{В} } $$

        Четвертая буква в слове меняется после каждых $3$-х изменений пятой буквы.
        Всего пятая буква изменилась $149$ раз, значит четвертая буква изменилась $149 : 3 = 49.(6)$, то есть $49$ целых раз.
        
        Раз произошло $49$ замен четвертой буквы, то, прямо как и с пятой буквой, мы можем $49$ поделить на $3$ и остаток от деления укажет на нужную букву.
        $49 = 16 \cdot 3 + 1$, то есть остаток равен $1$. А остаток $1$ связан с буквой $Б$.

        Итак, у слова на $150$-м месте в списке четвертая буква это "Б":

        $$ \boxed{ ? \ ? \ ? \ \text{Б} \ \text{В} } $$

        Точно такие же рассуждения проводим для третьей буквы.
        Она меняется после $3$-х изменений четвертой буквы, но и сама четвертая меняется после $3$-х изменений пятой буквы.
        Стало быть, третья буква меняется после каждых $3\cdot 3 = 9$ изменений пятой буквы.

        $149 : 9 = 16.(5)$, то есть $16$ раз поменялась третья буква. $16 = 3 \cdot 5 + 1$, остаток равен $1$.
        Итак, у слова на $150$-м месте в списке третья буква это тоже "Б":

        $$ \boxed{ ? \ ? \ \text{Б} \ \text{Б} \ \text{В} } $$

        Вторая буква меняется после каждых $3\cdot 3\cdot 3 = 27$ изменений пятой буквы.
        $149 : 27 = 5.(518)$, то есть $5$ раз поменялась вторая буква. $5 = 3 \cdot 1 + 2$, остаток равен $2$, что означает букву "В":

        $$ \boxed{ ? \ \text{В} \ \text{Б} \ \text{Б} \ \text{В} } $$

        Первая буква меняется после каждого $3\cdot 3\cdot 3\cdot 3 = 81$ изменения пятой буквы.
        $149 : 81 = 1.8\ldots$, то есть всего $1$ раз изменилась буква. С "А" на "Б".

        $$ \boxed{ \text{Б} \ \text{В} \ \text{Б} \ \text{Б} \ \text{В} } $$
    answer: |
        На $150$-м месте в списке стоит слово "БВББВ".
    similar:
        -   statement: |
                Елена составила список всех {{{ wordsLength }}}-буквенных слов, которые можно составить из букв {{{ wordsLetters }}}.
                Буквы записываются в алфавитном порядке. Вот начало списка:

                1. {{{ listWord1 }}}
                2. {{{ listWord2 }}}
                3. {{{ listWord3 }}}
                4. {{{ listWord4 }}}
                5. {{{ listWord5 }}}

                Запишите слово, которое стоит на {{{ pos }}}-м месте в этом списке.
            answer: |
                На {{{ pos }}}-м месте в списке стоит слово "{{{ word }}}"
            script: |
                function getRndCut()
                {
                    let startIndex = random.int(0, 3);
                    
                    let maxCutLength = Math.min(4, letters.length - startIndex);
                    let cutLength = random.int(3, maxCutLength);

                    return letters.slice(startIndex, startIndex + cutLength);
                }

                function getWordByNumWord(numWord, letters)
                {
                    return numWord.map(letterIndex => letters[letterIndex]).join('');
                }

                function getNumWordByPos(pos, base, wordLength)
                {
                    pos -= 1;

                    let numWord = [];
                    let divResult = pos;

                    while (divResult >= base)
                    {
                        numWord.push(divResult % base);
                        divResult = Math.floor(divResult / base);
                    }

                    numWord.push(divResult);

                    while (numWord.length < wordLength)
                        numWord.push(0);

                    return numWord.reverse();
                }

                function getPosByNumWord(numWord, base)
                {
                    let pos = 1;
                    [...numWord].reverse().forEach((num, i) => pos += num * Math.pow(base, i));

                    return pos;
                }

                //

                let letters = ['А', 'Б', 'В', 'Г', 'Д', 'Е'];

                letters = getRndCut();
                let wordsLength = random.int(4, 6);

                let listWords = [];
                for (let i = 1; i <= 5; i++)
                    listWords.push(getWordByNumWord(getNumWordByPos(i, letters.length, wordsLength), letters))

                let maxPos = 1;
                for (let i = 0; i < wordsLength; i++)
                    maxPos += (letters.length - 1) * Math.pow(letters.length, i);

                let minPos = Math.min(50, maxPos);

                let pos = random.int(minPos, maxPos);
                let numWord = getNumWordByPos(pos, letters.length, wordsLength);
                let word = getWordByNumWord(numWord, letters);

                let view = {
                    word: word,
                    wordsLength: '$' + wordsLength + '$',
                    wordsLetters: '«' + letters.join('», «') + '»',
                    pos: `$${pos}$`
                };

                listWords.forEach((listWord, i) => view[`listWord${i+1}`] = listWord);

                return view;

@task
    title: Обратный словарь
    statement: |
        Алина составила список всех $4$-буквенных слов, которые можно составить из букв "А", "Б", "В", "Г".
        Буквы записываются в алфавитном порядке. Вот начало списка:

        1. АААА
        2. АААБ
        3. АААВ
        4. АААГ
        5. ААБА

        На каком месте в этом списке стоит слово "ГБАВ"?
    hint: |
        Посчитайте, сколько раз должна измениться последняя (четвертая) буква, чтобы получилось слово "ГБАВ".
    solution: |
        Решить эту задачу можно двумя способами, как и задачу "[Пятибуквенный словарь](task:dictionary)": через системы счисления и напрямую.
        Правда, на этот раз оба способа довольно простые.

        ### Решение через системы счисления

        Точно так же нумеруем все буквы и получаем список уже не слов, а список чисел, записанных в четверичной системе счисления.
        Дано слово "ГБАВ", которое превращается в число $3102_{4}$.
        Переводим это число в десятичную систему счисления:

        $$ 3102_{4} = 2 \cdot 4^0 + 0 \cdot 4^1 + 1 \cdot 4^2 + 3 \cdot 4^3 = 210_{10} $$

        Запись числа $210$ в четверичной системе счисления стоит на $211$ месте в списке.

        ### Решение напрямую

        Раз самая первая буква в данном нам слове это "Г", значит до нее уже были использованы "А", "Б" и "В".
        Другими словами, первая буква изменилась $3$ раза:

        1. "А" на "Б"
        2. "Б" на "В"
        3. "В" на "Г"

        Первая буква меняется только после четырех изменений второй буквы.
        Вторая буква меняется после четырех изменений третьей буквы, которая и сама меняется после четырех изменений уже четвертой буквы.
        Короче, первая буква в слове меняется после $4 \cdot 4 \cdot 4 = 64$ изменений четвертвой буквы.

        В нашем случае первая буква изменилась три раза, поэтому "Г" мы получим только после $3 \cdot 64 = 192$ изменений последней буквы в слове.

        Вторая буква у нас это "Б".
        Она получается одним изменением с "А" на "Б".
        Но чтобы изменилась вторая буква, последняя буква должна поменяться $4 \cdot 4 = 16$ раз.

        Выходит, чтобы слово начиналось с букв "ГБ" последняя буква должна поменяться $192 + 16 = 208$ раз.

        Третья буква "A". Изменений нет, поэтому для нее требуются все те же $208$ изменений последней буквы.
        Ну а последняя буква "В" получется через два изменения:

        $$ \underbrace{192}_{\text{Г}} + \underbrace{16}_{\text{Б}} + \underbrace{0}_{\text{А}} + \underbrace{2}_{\text{В}} = 210 $$

        Итого, $210$ раз должна поменяться последняя буква, чтобы получилось слово "ГБАВ".
        Но последняя буква меняется постоянно, а значит ее изменения напрямую связаны с местом в списке.
        После $210$ изменения мы получим $211$ слово в списке:

        @math
            \begin{array}{}
                \overbrace{\text{АААА}}^{Слово \ 1} & & \overbrace{\text{АААБ}}^{Слово \ 2} & \cdots & \overbrace{\text{ГБАБ}}^{Слово \ 210} & & \overbrace{\text{ГБАВ}}^{Слово \ 211} \\
                & \underbrace{\text{A} \Rightarrow \text{Б}}_{\text{Замена 1}} & & \underbrace{\text{Б} \Rightarrow \text{В}}_{\text{Замена 2}} & \dots & \underbrace{\text{Б} \Rightarrow \text{В}}_{\text{Замена 210}} &
            \end{array}

        Слово "ГБАВ" стоит на $211$ месте в списке.
    answer: |
        Слово "ГБАВ" стоит на $211$ месте в списке.
    similar:
        -   statement: |
                Елена составила список всех {{{ wordsLength }}}-буквенных слов, которые можно составить из букв {{{ wordsLetters }}}.
                Буквы записываются в алфавитном порядке. Вот начало списка:

                1. {{{ listWord1 }}}
                2. {{{ listWord2 }}}
                3. {{{ listWord3 }}}
                4. {{{ listWord4 }}}
                5. {{{ listWord5 }}}

                На каком месте в этом списке стоит слово "{{{ word }}}"?
            answer: |
                {{{ pos }}}
            script: |
                function getRndCut()
                {
                    let startIndex = random.int(0, 3);
                    
                    let maxCutLength = Math.min(4, letters.length - startIndex);
                    let cutLength = random.int(3, maxCutLength);

                    return letters.slice(startIndex, startIndex + cutLength);
                }

                function getWordByNumWord(numWord, letters)
                {
                    return numWord.map(letterIndex => letters[letterIndex]).join('');
                }

                function getNumWordByPos(pos, base, wordLength)
                {
                    pos -= 1;

                    let numWord = [];
                    let divResult = pos;

                    while (divResult >= base)
                    {
                        numWord.push(divResult % base);
                        divResult = Math.floor(divResult / base);
                    }

                    numWord.push(divResult);

                    while (numWord.length < wordLength)
                        numWord.push(0);

                    return numWord.reverse();
                }

                function getPosByNumWord(numWord, base)
                {
                    let pos = 1;
                    [...numWord].reverse().forEach((num, i) => pos += num * Math.pow(base, i));

                    return pos;
                }

                //

                let letters = ['А', 'Б', 'В', 'Г', 'Д', 'Е'];

                letters = getRndCut();
                let wordsLength = random.int(4, 6);

                let listWords = [];
                for (let i = 1; i <= 5; i++)
                    listWords.push(getWordByNumWord(getNumWordByPos(i, letters.length, wordsLength), letters))

                let maxPos = 1;
                for (let i = 0; i < wordsLength; i++)
                    maxPos += (letters.length - 1) * Math.pow(letters.length, i);

                let minPos = Math.min(50, maxPos);

                let pos = random.int(minPos, maxPos);
                let numWord = getNumWordByPos(pos, letters.length, wordsLength);
                let word = getWordByNumWord(numWord, letters);

                let view = {
                    word: word,
                    wordsLength: '$' + wordsLength + '$',
                    wordsLetters: '«' + letters.join('», «') + '»',
                    pos: `$${pos}$`
                };

                listWords.forEach((listWord, i) => view[`listWord${i+1}`] = listWord);

                return view;

{ #latin-square }
@task
    title: Латинский квадрат
    tags:
        - Нестандартная
    statement: |
        Квадрат разделен на $9$ равных квадратов.
        Сколькими способами можно раскрасить их в красный, зеленый и синий цвета так, чтобы в каждом горизонтальном и каждом вертикальном ряду были все три цвета?
    hint: |
        Выполните переход от цветов к буквам.
        Например, абстрактные буквы $ABC$ могут обозначать как цвета "КЗС" ($A$ - красный, $B$ - зеленый, $C$ - синий), так и цвета "ЗСК" ($A$ - зеленый, $B$ - синий, $C$ - красный).
        Это позволит сильно сократить количество перебираемых вариантов.
    solution: |
        Начнем решение задачи с того, что полностью откажемся от работы с цветами.
        Вместо них мы будем использовать буквы $A, B, C$. Три цвета -- три буквы.

        Фишка в том, что **буква не привязана жестко к цвету**.
        Вместо этого мы сами можем **назначать** каждой букве свой цвет.

        Строчка букв $ABC$ может обозначать как цвета "КЗС" ($A$ - красный, $B$ - зеленый, $C$ - синий), так и цвета "ЗСК" ($A$ - зеленый, $B$ - синий, $C$ - красный).
        Перебором найдем все возможные комбинации из трех цветов:

        $$ КЗС \quad КСЗ \quad ЗКС \quad СКЗ \quad ЗКС \quad СЗК $$

        Итак, всего одна запись $ABC$ как-бы скрывает в себе сразу все $6$ возможных комбинаций из трех цветов.

        ### Заполняем таблицы

        В условии сказано про квадрат, который разделен на $9$ равных квадратов.
        То есть речь идет про обычную таблицу размерами $3 \times 3$.
        Верхнюю строчку этой таблицы заполним буквами $ABC$:

        <style>
            .latin-square td { width: 40px; height: 40px; text-align: center; }
        </style>

        { .latin-square }
        @table
            content:
                <tr>
                    <td>$A$</td>
                    <td>$B$</td>
                    <td>$C$</td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
        
        Держите в голове, что одна эта схематичная таблица на самом деле скрывает в себе сразу $6$ таблиц, в которых в верхней строчке вместо букв стоят все возможные комбинации трех цветов.

        Теперь заполним левый столбец таблицы.
        Получаем два варианта:

        @array
            items:
                - |
                    { .latin-square }
                    @table
                        content:
                            <tr>
                                <td>$A$</td>
                                <td>$B$</td>
                                <td>$C$</td>
                            </tr>
                            <tr>
                                <td>$B$</td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>$C$</td>
                                <td></td>
                                <td></td>
                            </tr>
                - |
                    { .latin-square }
                    @table
                        content:
                            <tr>
                                <td>$A$</td>
                                <td>$B$</td>
                                <td>$C$</td>
                            </tr>
                            <tr>
                                <td>$C$</td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>$B$</td>
                                <td></td>
                                <td></td>
                            </tr>

        Опять же не забываем, что на самом деле каждая из этих двух таблиц на самом деле скрывает в себе $6$ разных вариантов, если перейти от букв к цветам.
        Продолжаем заполнять оставшиеся ячейки:

        @array
            items:
                - |
                    { .latin-square }
                    @table
                        content:
                            <tr>
                                <td>$A$</td>
                                <td>$B$</td>
                                <td>$C$</td>
                            </tr>
                            <tr>
                                <td>$B$</td>
                                <td>$C$</td>
                                <td>$A$</td>
                            </tr>
                            <tr>
                                <td>$C$</td>
                                <td>$A$</td>
                                <td>$B$</td>
                            </tr>
                - |
                    { .latin-square }
                    @table
                        content:
                            <tr>
                                <td>$A$</td>
                                <td>$B$</td>
                                <td>$C$</td>
                            </tr>
                            <tr>
                                <td>$C$</td>
                                <td>$A$</td>
                                <td>$B$</td>
                            </tr>
                            <tr>
                                <td>$B$</td>
                                <td>$C$</td>
                                <td>$A$</td>
                            </tr>

        Новых вариантов не появилось.
        Итого у нас $2$ разные таблицы с буквами.
        Но каждая из этих буквенных таблиц раскрывается в $6$ таблиц с цветами.
        Получем всего $2 \cdot 6 = 12$ таблиц с цветами вместо букв.
    answer: |
        $12$

@task
    title: Повелитель делителей
    tags:
        - Олимпиадная
    statement: |
        Найдите количество натуральных чисел от $1$ до $100$, имеющих ровно четыре натуральных делителя, не менее чем три из которых не превосходят $10$.
    solution: |
        Нас просят найти числа, которые имеют ровно $4$ натуральных делителя.
        Но любое число как минимум делится на само себя и на $1$, поэтому остаются только **два** разных делителя.

        Первый вариант это когда оба делителя являются простыми числами.
        Тогда они не смогут разложиться и породить еще больше делителей.
        По условию задачи делители не могут быть больше $10$, поэтому подходят все варианты произведения разных простых чисел из списка $2,3,5,7$:

        @math
            \begin{array}{}
                2\cdot 3 = 6 & 2\cdot 5 = 10 & 2\cdot 7 = 14 \\
                & 3\cdot 5 = 15 & 3\cdot 7 = 21 \\
                & & 5 \cdot 7 = 35
            \end{array}

        Всего $6$ чисел с двумя разными простыми делителями.

        Но может быть вариант, когда один из делителей простой, а второй является его квадратом.
        В этом случае мы все равно остаемся в рамках двух разных делителей, даже не смотря на то, что второй составной.

        @math
            2\cdot 4 = 8 \qquad 3\cdot 9 = 27

        Итого всего $8$ чисел подходящих под условие задачи, $6$ от произведения двух разных простых чисел и $2$ от произведения простого и его квардата.

        ### Интересный факт
        
        Из задачи следует, что **любые числа** с двумя разными нетривиальными делителями являются либо произведением двух простых чисел, либо кубами простых чисел.

    answer: |
        $8$

@task
    title: Цифровой разбиватель
    tags: ['Олимпиадная']
    statement: |
        Сколькими способами цифры от $1$ до $9$ можно разбить на несколько (больше одной) групп так, чтобы суммы цифр во всех группах были равны друг другу?<br>
        Порядок расположения групп не имеет значения.
    hint: |
        Воспользуйтесь тем, что сумма всех цифр, число $45$, есть величина постоянная.
        На основе этого числа найдите допустимые значения для сумм цифр в группах.
    solution: |
        Если мы сложем все цифры от $1$ до $9$, то получим число $45$.
        Число $45$ мы также получим, если сложем суммы цифр в группах.
        Но по условию нам известно, что суммы цифр во всех группах одинаковые, значит нам нужно искать способы представить число $45$ как сумму одинаковых чисел.

        Каждое деление числа $45$ нацело дает по одному такому способу.
        Например, на $2$ число $45$ нацело не делится, то есть невозможно разбить цифры с $1$ по $9$ на две группы с одинаковыми суммами.
        Дальше идет число $3$ и на него $45$ делится:

        $$ 45 = 15 + 15 + 15 $$

        Значит, в теории, можно попробовать составить $3$ группы цифр, каждая из которых в сумме дает число $15$.

        Преберем все возможные варианты:

        @math
            \begin{align*}
                &1) \ 45 = 1 \cdot 45 = 1 + 1 + \ldots \\
                &2) \ 45 = 3 \cdot 15 = 3 + 3 + \ldots \\
                &3) \ 45 = 5 \cdot 9 = 5 + 5 + \ldots \\
                &4) \ 45 = 9 \cdot 5 = 9 + 9 + 9 + 9 + 9 \\
                &5) \ 45 = 15 \cdot 3 = 15 + 15 + 15 \\
                &6) \ 45 = 45 \cdot 1 = 45
            \end{align*}

        Варианты $1)$ и $2)$ не подходят, потому что нельзя разбить $9$ данных в условии цифр на $45$ и $15$ групп соответственно.
        Групп больше чем имеющихся у нас цифр.

        Вариант $3)$ не подходит, потому что в этом случае у нас будет $9$ групп по одной цифре в каждой.
        Но так как все эти цифры разные, нарушается требование, чтобы сумма цифр во всех группах была равной.

        Вариант $6$ не подходит, потому что в нем всего одна группа цифр, а это запрещено по условию.
    
        Варианты $4)$ и $5)$ на данном этапе противоречий не вызывают и с ними нужно работать дальше.

        ### Вариант 4)

        Рассмотрим вариант $4)$, то есть $5$ групп по $9$ в сумме в каждой.

        Одна из этих пяти групп обязательно должна состоять только из цифры $9$.
        Цифра $8$ может идти только в отдельной группе с цифрой $1$, цифра $7$ только с цифрой $2$ и так далее.
        Получаем первое разбиение:

        $$ \set{9} \quad \set{8, 1} \quad \set{7, 2} \quad \set{6,3} \quad \set{5,4} $$

        ### Вариант 5)

        В этом варианте у нас $3$ группы по $15$ в сумме в каждой.

        В какой-то из этих трех групп обязательно окажется цифра $9$.
        Так как порядок групп значения не имеет, будем считать, что цифра $9$ оказалась в первой группе.

        Раз в первой группе оказалась цифра $9$, то сумма оставшихся цифр в этой группе должна быть равна $6$.
        Все способы получить эту шестерку и приведут нас ко всем способам сформировать первую группу:

        @math
            \begin{align*}
                &а) \ 9 + 6 \\
                &б) \ 9 + 5 + 1 \\
                &в) \ 9 + 4 + 2 \\
                &г) \ 9 + 3 + 2 + 1
            \end{align*}

        Всего $4$ способа составить первую группу из трех.
        Во вторую группу поместим цифру $8$.
        Сумма оставшихся цифр во второй группе должна быть равна $7$.
        Найдем все способы сформировать вторую группу:

        @math
            \begin{align*}
                &1) \ 8 + 7 \\
                &2) \ 8 + 6 + 1 \\
                &3) \ 8 + 5 + 2 \\
                &4) \ 8 + 4 + 3 \\
                &5) \ 8 + 4 + 2 + 1
            \end{align*}

        При выборе первой и второй групп из списков выше третья будет состоять из оставшихся цифр, никаких дополнительных вариаций.
        Осталось только перебрать все пары первой и второй групп и откинуть лишние варианты.

        Так, группа $а)$ точно несовместима с группой $2)$ (потому что цифра $6$ уже занята), но с оставшимися четырьмя группами с цифрой $8$ совместима.
        Получаем $4$ разбиения.

        Группа $б)$ несовместима с группами $2), 3)$ и $5)$, но с оставшимися двумя группами совместима.
        Еще $2$ разбиения.

        Группа $в)$ несовместима с группами $3), 4), 5)$, с остальными совместима.
        Еще $2$ разбиения.

        Группа $г)$ совместима только с группой $1)$. Еще $1$ разбиение.

        ### Итог

        $1$ разбиение на пять групп и $9$ разбиений на три группы.
        Всего $10$ разбиений.
    answer: $10$

@todo
    title: Добавить больше задач!
    content: |
        * Задачи из "[Перебор вариантов](@direct|https://mathus.ru/math/kombinatorika.pdf)"