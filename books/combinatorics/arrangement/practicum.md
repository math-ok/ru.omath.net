^ sumRule @article|combinatorics/rules/sum|d:rule-of-sum
^ productRule @article|combinatorics/rules/product|d:rule-of-product

^ aRepeat @article|t:arrangement-repeat
^ aUnique @article|t:arrangement-unique-full

@task
    title: Сезам, откройся!!!
    statement: |
        Выпишите формулы количества размещений для подбора открывающей комбинации к каждому замку на изображении.
        Недостающие данные замените буквами.

        @image
            src: assets/locks.webp
    answer: |
        @math
            \def\arraystretch{1.5}
            \begin{array}{}
                10^k & 26^5 & 90^{2?} \\
                10^4 & 90^k & 10^5
            \end{array}

        Две белые засечки на дисковом замоке в правом верхнем углу могут означать, что для его открытия требуется указать два числа.

@task
    title: Мастер по семафорам
    statement: |
        На картинках ниже изображен оптический телеграф. Такие использовались в Норвегии во время наполеоновских войн.
        Найдите, сколько уникальных сигналов можно передать с его помощью.

        @image
            src: assets/practicum/semafor-one.webp
            width: 500px
    hint: |
        Каждая железная пластина может быть в двух состояниях: поднята и опущена.
    solution: |
        Телеграф состоит из $6$ железных пластин, каждая из которых может быть в двух состояниях: поднята и опущена.
        Каждый сигнал, который может передать этот семафор, можно представить как [размещение с повторениями](^aRepeat) из $2$ состояний пластин по $6$ пластинам:

        $$ \A_2^6 = 2^6 = 64 $$
    answer: $\A_2^6 = 64$
    similar:
        -   statement: |
                А вот такой замечательный семафор можно найти в Стокгольме.
                Сколько сигналов можно передать с его помощью?

                @image
                    src: assets/practicum/semafor-two.webp
                    width: 500px
                    caption: На фоне стоит современная радиовышка. Две эпохи на одном кадре...
            
            answer: $\A_2^7 = 128$
        -   statement: |
                На картинке изображен концепт семафора за авторством англичанина Ричарда Лоуэлла.
                Он состоит из $4$ вращающихся с шагом в $45$ градусов треугольников.
                Солько сигналов можно было бы передать с помощью такого устройства?

                @image
                    src: assets/practicum/semafor-three.png
                    width: 400px
            solution: |
                Каждый из треугольников может быть в любом из $360 : 45 = 8$ положений.
                Всего треугольников $4$.
                Тогда каждый сигнал этого семафора может быть представлен как размещение с повторениями из $8$ возможных положений по $4$ треугольникам:

                $$ \A_8^4 = 8^4 = 4096 $$
            answer: $ \A_8^4 = 4096 $

@task
    title: Напряженный экзамен
    statement: |
        Пятеро студентов сдают экзамен.
        Сколькими способами могут быть поставлены им отметки, если известно, что все студенты экзамен сдали (получили отметку $3$, $4$ или $5$)?
    solution: |
        Возможные варианты расставить отметки студентам можно представить как [размещения с повторениями](^aRepeat) из $3$ отметок по $5$ студентам:

        $$ \A_3^5 = 3^5 = 243 $$
    answer: $\A_3^5 = 243$

@task
    title: Мелочь есть? А если найду?!
    statement: |
        Сколькими способами можно разложить в два кармана десять монет различного достоинства?
    hint: |
        Размещайте не монеты по карманам, а карманы по монетам.
    solution: |
        При решении этой задачи может возникнуть вполне естественное желание пытаться разместить монеты по карманам.
        Но это тупиковый вариант.

        На самом деле размещать надо не монеты по карманам, а наоброт, карманы по монетам -- каждой монете назначать свой карман, причем карманы могут повторяться.
        При таком подходе задача сводится к нахождению количества [размещений с повторениями](^aRepeat) из $2$ карманов по $10$ монетам:

        $$ \A_2^{10} = 2^{10} = 1024 $$
    answer: $\A_2^{10} = 1024$

@task
    title: Служба доставки
    statement: |
        Надо срочно доставить $6$ посылок разным адресатам.
        Сколькими способами это можно сделать, если для передачи посылок можно послать четырех курьеров, и каждую посылку можно дать любому из них?

        *Курьер сам решает, в каком порядке доставлять данные ему посылки.*
    hint: |
        Внимательно подумайте, какие размещения надо считать: курьеров по посылкам или посылок по курьерам?
    solution: |
        В этой задаче можно посчитать как размещения курьеров по посылкам, так и размещения посылок по курьерам.
        Самое интересное, что оба варианта возможны и дадут корректные результаты.
        Вот только под условие задачи подходит только один вариант.

        Если посчитать размещения без повторений из $6$ посылок по четырем курьерам, то мы выдадим каждому курьеру только по одной посылке!
        Из-за этого 2 посылки останутся на складе и адресаты их не получат!
        А в условии задачи сказано, что посылки надо доставить срочно.

        Поэтому считать надо размещения с повторениями из четырех курьеров по $6$ посылкам!
        В этом случае все посылки будут распределны между курьерами.

        $$ \A_4^6 = 4^6 = 4096 $$
    answer: $\A_4^6 = 4096$

{ #big-journey }
@task
    title: Большое путешествие
    statement: |
        Из Николаева в Ольгино ведут $2$ шоссе, соединенные $10$ проселочными дорогами.
        Сколькими способами можно проехать из Николаева в Ольгино так, чтобы дорога не пересекала себя?

        @image
            src: assets/practicum/roads-1.svg
            width: 375px
            invert: dark
    hint: |
        Найдите, сколько есть вариантов продолжить движение по достижении очередной проселочной дороги.
    solution: |
        Из начальной точки, Николаево, есть $2$ возможных пути на одно из двух шоссе.
        
        Вне зависимости от выбранного пути мы достигаем первой проселочной дороги.
        В этот момент есть снова $2$ возможных пути: продолжить ехать по шоссе или свернуть на проселочную дорогу.
        
        Первый вариант сразу приводит ко второй проселочной дороге.
        Во втором варианте мы по проселочной дороге доезжаем до противоположного шоссе.
        Назад по этому шоссе вернуться не можем, потому что неизбежно возникнет пересечение.
        Поэтому остается только ехать по этому шоссе до второй проселочной дороги.

        Вне зависимости от выбранного пути мы все равно оказались у второй проселочной дороги.
        Тут ситуация повторяется -- снова $2$ возможных пути, которые неизбежно приведут уже к $3$ проселочной дороге.
        И так каждый раз.

        Все путешествие можно представить как размещение с повторениями из $2$ возможных путей по $11$ "точкам выбора" (одна в начале пути и $10$ на каждой из проселочных дорог):

        $$ \A_2^{11} = 2^{11} = 2048 $$
    answer: $\A_2^{11} = 2048$

@task
    title: Встречное движение
    statement: |
        Пусть при том же условии из задачи "[Большое путешествие](task:big-journey)" два путешественника выезжают из Николаева по разным шоссе.
        Сколькими способами может произойти путешествие так, что ни один участок шоссе они не проезжают в одном и том же направлении?
    hint: |
        Покажите, что количество возможных путей на каждом выборе не поменяется.
    solution: |
        Теперь у нас уже два человека.
        Значит ли это, что на каждом перекрестке появляется больше вариантов пути?
        Нет.

        Дело в том, что абсолютно на каждом перекрестке они **должны делать одинаковый** выбор.
        Первый сворачивает на проселочную дорогу -- второй обязан свернуть на нее же.
        Первый продолжает ехать по шоссе -- второй поступает так же.

        Если хоть раз они выберут разные действия, то один из них неизбежно попадет на то же самое шоссе, на котором находится воторой и пройдет тот же участок и в том же направлении.

        Значит, по достижении каждой из $10$ проселочных дорог совместное путешествие обоих человек может быть продолжено только $2$ способами:

        $$ \A_2^{10} = 2^{10} = 1024 $$
 
        Самого первого выбора (выбора шоссе) тут нет, так как по условию они уже совершили этот выбор.
    answer: |
        $$ \A_2^{10} = 2^{10} = 1024 $$

@task
    title: Последнее путешествие
    statement: |
        Из Ольгино в Пеньки ведут $3$ шоссе, пересекаемые $4$ проселочными дорогами.
        Сколькими способами можно совершить путешествие, если ни по одному участку шоссе не едут в направлении Ольгино и ни один участок не проезжают дважды?

        @image
            src: assets/practicum/roads-2.svg
            width: 375px
            invert: dark
    hint: |
        Найдите, сколько есть вариантов продолжить движение по достижении очередной проселочной дороги.
    solution: |
        Стартовое шоссе можно выбрать $3$-мя способами.
        
        Вне зависимости от выбранного шоссе, когда путешественник доедет до первой проселочной дороги, у него будет $3$ варианта  продолжить путь:

        1. Продолжить движение по шоссе до второй проселочной дороги
        2. Свернуть на проселочную дорогу, доехать до центрального шоссе, свернуть на него и доехать до второй проселочной дороги
        3. Свернуть на проселочную дорогу, доехать до противоположного шоссе (минуя центральное), свернуть на него и доехать до второгой проселочной дороги

        Такая ситуация будет происходить на каждой из $4$ встречающихся проселочных дорог.
        Итого всего $1 + 4 = 5$ выборов, в каждом из которых можно выбрать один из $3$ вариантов:

        $$ \A_3^5 = 243 $$
    answer: $\A_3^5 = 243$

@task
    title: Нулевая буква
    statement: |
        Алексей хочет посчитать сколько однобуквенных, двухбуквенных и трехбуквенных слов можно составить из букв $A, B, C, D$.
        Чтобы одним ходом посчитать сразу все слова, он добавил к буквам особый элемент -- нулевую букву $\Theta$.
        Она означает пустоту -- отсутствие буквы.
        
        Количество сразу всех однобуквенных, двухбуквенных и трехбуквенных теперь можно представить как размещения с повторениями из $5$ букв ($4$ буквы и одна нулевая) по $3$ "вакантым местам" в слове:

        $$ \A_5^3 = 5^3 = 125 $$

        Правильно ли поступил Алексей?
        Если нет, объясните, в чем ошибка в его подходе и найдите правильное количество слов.
    hint: |
        Проблема в том, что размещения это **упорядоченные** комбинации.
    solution: |
        Идея добавить нулевую букву отличная и она даже работает, но не в формуле размещений.
        Размещение по [определению](@article|d:arrangement-repeat) -- **упорядоченная** комбинация, то есть порядок расположения элементов в ней имеет значение.

        Приведем пример.
        Вот несколько комбинаций, которые идут в зачет в формуле $\A_5^3$:

        $$ \Theta \Theta A \qquad \Theta A \Theta \qquad A \Theta \Theta $$

        Все эти три **разных** размещения обозначают **одно и то же** однобуквенное слово $A$.
        Поэтому, среди $125$ полученных слов есть много вот таких вот дубликатов с разным положением нулевых букв.

        Для получения правильного ответа надо убрать нулевую букву и отдельно посчитать сначало количество однобуквенных слов, потом двухбуквенных, а затем и трехбуквенных. 

        $$ \A_4^1 = 4^1 = 4 \qquad \A_4^2 = 4^2 = 16 \qquad \A_4^3 = 4^3 = 64 $$

        Получили три непересекающихся групп слов.
        Используя [правило суммы](^sumRule) находим все возможные слова:

        $$ 4 + 16 + 64 = 84 $$
    answer: |
        Алексей не учел, что размещения это упорядоченные комбинации.
        Из-за этого в его ответе много дубликатов.
        Правильное количество слов -- $84$.

@task
    title: Старые автомобильные номера
    statement: |
        Когда-то автомобильные номера состояли из одной, двух или трех букв и следующих за ними четырех цифр.
        Найдите число таких номеров, если использовались $32$ буквы.
    hint: |
        Отдельно посчитайте количество комбинаций из букв, отдельно количество комбинаций из цифр.
        Потом используйте [правило умножения](^productRule).
    solution: |
        По отдельности найдем количество всех однобуквенных, двухбуквенных и трехбуквенных слов, которые можно составить из $32$ букв:

        $$ \A_{32}^1 = 32^1 = 32 \\ \A_{32}^2 = 32^2 = 1024 \\ \A_{32}^3 = 32^3 = 32 \ 768 $$

        Получили три непересекающихся групп слов.
        Используя [правило суммы](^sumRule) находим все возможные слова:

        $$ 32 + 1024 + 32 \ 768 = 33 \ 824 $$

        Теперь разбираемся с цифрами.
        Всего их $10$, а в номере можно записать только $4$.
        Количество всех таких комбинаций цифр можно найти по формуле [размещений с повторениями](^aRepeat) из $10$ цифр по $4$ местам:

        $$ \A_{10}^4 = 10^4 = 10 \ 000 $$

        Итак, у нас есть $33 \ 824$ возможных комбинаций букв.
        Вне зависимости от выбранной комбинации букв, затем есть еще $10 \ 000$ способов выбрать набор цифр.
        Находим число всех возможных автомобильных номеров по [правилу умножения](^productRule):

        $$ 33\ 824 \cdot 10 \ 000 = 338 \ 240 \ 000 $$

        Всего больше $338$ миллионов номеров!
    answer: $$ \left(\A_{32}^1 + \A_{32}^2 + \A_{32}^3\right)\cdot \A_{10}^4 = 338 \ 240 \ 000$$

@task
    title: Новые автомобильные номера
    statement: |
        В $2004$ году в России давали автомобильные номера типа $77х451хо$, в которых употреблялись цифры и кирилические буквы, имеющие аналог в латинском алфавите (таких $12$).
        Первые два элемента -- цифры (код региона), затем идет буква, затем трехзначное число и под конец еще две буквы.

        Сколько таких автомобильных номеров могли выдать в России?
        А сколько номеров могли выдать в Москве, на которую выделили три кода региона: $77, 97$ и $99$?
    hint: |
        Для удобства сначала найдите количество номеров на каждый регион.
    solution: |
        Посчитаем сначала, сколько всего может быть буквенных комбинаций.
        Каждую такую комбинацию можно представить как [размещение с повторениями](^aRepeat) из $12$ букв по $3$ местам:

        $$ \A_{12}^3 = 12^3 = 1728 $$

        Таким же образом находим количество комбинаций из трех цифр между буквами:

        $$ \A_{10}^3 = 10^3 = 1000 $$

        Выбор комбинации букв никак не влияет на выбор комбинации цифр, поэтому можно применить [правило умножения](^productRule).

        $$ 1728 \cdot 1000 = 1\ 728 \ 000 $$

        Мы нашли количество автомобильных номеров на один регион.
        Теперь можно ответить на оба поставленных в задаче вопроса.
        Стоит только учесть, что региона с кодом $00$ в России не существует, поэтому всего регионов $99$, а не $100$.

        Все возможные номера в России:

        $$ 99 \cdot 1 \ 728 \ 000 = 171 \ 072 \ 000 $$

        Из них выделено для Москвы:

        $$ 3 \cdot 1 \ 728 \ 000 = 5 \ 184 \ 000 $$
    answer: |
        Всего возможных номеров в России: $ 171 \ 072 \ 000 $
        <br>
        Из них выделено для Москвы: $ 5 \ 184 \ 000 $

@task
    title: Скажите «Ааа»
    statement: |
        В некотором государстве не было двух жителей с одинаковым набором зубов.
        Какова может быть наибольшая численность населения этого государства?
        
        *Во рту человека не может быть более 32 зубов.*
    hint: |
        Каждое "вакантное место" в челюсти может иметь одно из двух состояний: "зуб есть" и "зуба нет".
    solution: |
        У каждого жителя в этом государстве свой набор, своя уникальная комбинация зубов.
        Какие-то есть, какие-то отсутствуют.
        Каждую такую комбинацию можно представить как размещение с повторениями из $2$ состояний ("есть зуб" и "нет зуба") по $32$ местам в челюсти:

        $$ \A_{2}^{32} = 2^{32} = 4 \ 294 \ 967 \ 296 $$
    answer: |
        $$ \A_{2}^{32} = 2^{32} = 4 \ 294 \ 967 \ 296 $$

@task
    title: Конструктор чисел
    statement: |
        Сколько чисел, меньших миллиона, можно написать с помощью цифр:
        
        1. $8$ и $9$;
        2. $7, 8, 9$;
        3. $0, 8, 9$ (с цифры $0$ число начинаться не может)?
    hint: |
        Отдельно с помощью формулы [размещений с повторениями](^aRepeat) посчитайте количество однозначных, двузначных, ..., шестизначных чисел, а потом найдите общее их количество по [правилу суммы](^sumRule).
    solution: |
        Отдельно с помощью формулы [размещений с повторениями](^aRepeat) считаем количество однозначных, двузначных, ..., шестизначных чисел, а потом находим общее их количество по [правилу суммы](^sumRule).

        Первый вариант:

        $$ 2^1 + 2^2 + 2^3 + 2^4 + 2^5 + 2^6 = 126 $$

        Второй вариант:

        $$ 3^1 + 3^2 + 3^3 + 3^4 + 3^5 + 3^6 = 1092 $$

        Третий вариант.
        Первая цифра в числе не может быть $0$, поэтому в каждой группе будет $2$ варианта выбрать первую цифру, а затем уже по $3$ варианта на каждую следующую цифру:

        $$ 2 + 2\cdot 3^1 + 2\cdot 3^2 + 2\cdot 3^3 + 2\cdot 3^4 + 2\cdot 3^5 = \\ = 2 \cdot \left( 3^1 + 3^2 + 3^3 + 3^4 + 3^5 \right) = \\ = 726 $$
    answer: |
        1. $ 126 $
        2. $ 1092 $
        3. $ 726 $

@task
    title: Найди работу
    statement: |
        Трое юношей и две девушки выбирают себе место работы.
        В городе есть три завода, где требуются рабочие (туда берут лишь мужчин), два магазина, куда берут лишь женщин, и две фирмы, куда требуются и мужчины, и женщины.
        Сколькими способами они могут распределиться между этими предприятиями?
    hint: |
        Отдельно найдите количество способов устроить на работу только мужчин, потом только женщин.
    solution: |
        Задача пытается нас запутать, подталкивая работать сразу и с юношами, и с девушками.

        Разберемся сначала только с юношами.
        Их всего три и каждый может устроиться на любую из $5$ работ ($3$ завода и $2$ фирмы).
        Количество всех способов устроить каждого мужчину на работу находим по формуле [размещений с повторениями](^aRepeat) из $5$ мест для работы по $3$ юношам:

        $$ \A_5^3 = 5^3 = 125 $$

        Точно также поступаем и с девушками:

        $$ \A_4^2 = 4^2 = 16 $$

        Итак, есть $125$ способов устроить на работу мужчин.
        Вне зависимости от того, на какие работы устроились мужчины, есть еще $16$ способов устроить на работу женщин.
        По [правилу произведения](^productRule) находим общее количество способов устроить каждого на работу:

        $$ 125 \cdot 16 = 2000 $$
    answer: $\A_5^3 \cdot \A_4^2 = 2000$

@task
    title: Пернатая братва
    statement: |
        Имеется три курицы, четыре утки и два гуся.
        Сколькими способами можно выбрать из них несколько птиц так, чтобы среди выбранных оказались и куры, и утки, и гуси?
    hint: |
        Каждой птице (например, курице) можно назначить состояние "выбрана" и "не выбрана".
        Используйте этот факт, чтобы посчитать количество способов выбрать птиц этого типа.
    solution: |
        Разберемся сначала с курицами.
        Каждой курице можно назначить состояние "выбрана" и "не выбрана".
        Тогда каждый способ выбрать куриц можно представить как [размещение с повторениями](^aRepeat) из $2$ состояний по $3$ курицам:

        $$ \A_2^3 = 2^3 = 8 $$

        Но так как хотя бы одна курица должна быть выбрана обязательно, комбинацию из трех состояний "не выбрана" мы убираем.
        Всего $7$ варинатов выбрать куриц.

        Точно так же находим все способы выбрать уток и гусей:

        $$ \A_2^4 - 1 = \underbrace{15}_{Утки} \qquad \A_2^2 - 1 = \underbrace{3}_{Гуси} $$

        Итак, есть $7$ способов выбрать куриц. Вне зависимости от сделанного выбора потом есть $15$ способов выбрать уток и $3$ способа выбрать гусей.
        Используем [правило произведения](^productRule):

        $$ 7 \cdot 15 \cdot 3 = 315 $$
    answer: $$ \left(\A_2^3 - 1\right)\cdot \left(\A_2^4 - 1\right) \cdot \left(\A_2^2 - 1\right) = 315$$

@task
    title: Светофорные огни
    statement: |
        На перекрестке имеется $m$ светофоров.
        Сколько может быть различных состояний этих светофоров, если каждый светофор независимо от остальных имеет три возможных состояния: горит зеленый; горит желтый; горит красный?

        Решите ту же задачу, если допускаются все возможные комбинации огней каждого светафора.
    hint: |
        Для подсчета количества состояний, в которых может быть один светофор, используйте тот факт, что каждый его цвет может иметь состояние "включен" или "выключен".
    solution: |
        Каждый светофор может быть в одном из трех состояний.
        Всего светофоров $m$.
        Каждое состояние всех светофоров может быть представлено как размещение из $3$ состояний по $m$ светофорам:

        $$ \A_3^m = 3^m $$

        Если допускаются все возможные комбинации огней, то надо сначала посчитать, сколько их всего.
        Каждый светофор имеет три цвета.
        Каждый цвет может быть в двух состояниях: "включен" или "выключен".
        Тогда любая комбинация огней одного светофора может быть представлена как размещение с повторениями из $2$ состояний по $3$ цветам:

        $$ \A_2^3 = 2^3 = 8 $$

        При таких условиях все светофоры могут находиться не в $3^m$ состояниях, а в $8^m$ состояниях.
    answer: |
        С тремя состояниями все светофоры могут находиться в $3^m$ состояниях.
        Если ограничений на состояние светофоров нет, то все они могут находиться в $8^m$ состояниях.

@task
    title: Без «А» никудА
    statement: |
        Сколько можно составить из $32$ букв шестибуквенных слов, содержащих хотя бы один раз букву "а"?
    hint: |
        Представьте ответ как разность двух формул количества размещений с повторениями.
    solution: |
        Количество шестибуквенных слов, которые можно набрать из $32$ букв равно $\A_{32}^6$.
        Но среди этих слов есть и те, в которых совсем нет буквы "а".
        Раз в таких словах нет буквы "а", то можно сказать, что они составлены не из $32$ букв, а из $31$.

        Слов без буквы "а", то есть слов из $31$ букв всего $\A_{31}^6$.
        Для получения ответа надо вычесть из всех слов те, в которых совсем нет буквы "а":

        $$ \A_{32}^6 - \A_{31}^6 = 32^6 - 31^6 = 186 \ 238 \ 143 $$
    answer: |
        $$ \A_{32}^6 - \A_{31}^6 = 32^6 - 31^6 = 186 \ 238 \ 143 $$

@task
    title: Однобуквенные близнецы
    statement: |
        В селении проживает $1000$ жителей.
        Докажите, что по крайней мере двое из них имеют одинаковые инициалы.
    hint: |
        Найдите количество возможных инициалов.
    solution: |
        Инициалы человека это первые буквы его имени и отчества.
        Так как имя и отчество точно не могут начинаться с букв "Ь" и "Ъ", то всего есть $33 - 2 = 31$ буква.
        Каждые инициалы можно представить как размещение с повторением из $31$ буквы по $2$ местам:

        $$ \A_{31}^2 = 31^2 = 961 $$

        Видим, что уникальных инициалов хватит всего на $961$ человек.
        А в селении проживает $1000$ жителей.
        Это означает, что в нем точно найдется по крайней мере два человека с одинаковыми инициалами.

        $\blacksquare$

@task
    title: Телефонный номер
    statement: |
        Сколько существует семизначных телефонных номеров, в первых $3$ цифрах которых не встречаются цифры $0$ и $9$?
    hint: |
        Отдельно посчитайте количество комбинаций первых трех цифр в номере, а потом количество комбинаций оставшихся четырех цифр.
    solution: |
        Найдем количество вариантов выбрать первые три цифры телефонного номера.
        В них можно использовать только $8$ цифр:

        $$ \A_8^3 = 8^3 $$

        Теперь найдем количество вариантов выбрать оствшиеся четыре цифры, на которых уже нет никаких ограничений:

        $$ \A_{10}^4 = 10^4 $$

        Выбор первых трех цифр никак не влияет на выбор оставшихся четырех.
        Поэтому можно использовать [правило произведения](^productRule):

        $$ 8^3\cdot 10^4 = 5 \ 120 \ 000 $$
    answer: |
        $$ 8^3\cdot 10^4 = 5 \ 120 \ 000 $$

@task
    title: Власть имущие
    statement: |
        В правление избрано $9$ человек.
        Из них надо выбрать председателя, заместителя председателя и секретаря.
        Сколькими способами это можно сделать?
    hint: |
        Восползуйтесь формулой [размещений без повторений](^aUnique).
    solution: |
        Каждый вариант избрать трех членов правления можно представить как [размещение без повторений](^aUnique) из $9$ человек по $3$ должностям:

        $$ A_9^3 = 9\cdot 8\cdot 7 = 504 $$
    answer: $A_9^3 = 504$
    similar:
        -   statement: |
                Имеется {{{ gloves }}} пар перчаток различных размеров.
                Сколькими способами можно выбрать из них одну перчатку на левую руку и одну -- на правую руку так, чтобы эти перчатки были различных размеров?
            answer: |
                {{{ answer }}}
            script: |
                let gloves = random.int(5, 20);
                let answer = gloves * (gloves - 1);

                return { gloves: `$${gloves}$` , answer: `$A_{${gloves}}^2 = ${answer}$` }

@task
    title: Несинхронный переводчик
    statement: |
        Сколько словарей надо издать, чтобы можно было непосредственно выполнять переводы с любого из пяти языков: русского, английского, французского, немецкого, итальянского на любой другой из этих пяти языков?
        На сколько больше словарей придется издать, если число различных языков равно $10$?
    hint: |
        Словарь нужен на каждую пару языков.
        Например: русско-английский словарь, французско-немецкий и так далее.
    solution: |
        Составим все возможные пары языков, между которыми может выполняться перевод.
        Каждая такая пара может быть представлена как [размещение без повторений](^aUnique) из $5$ языков с которых надо перевести по $4$ оставшимся языкам, на которые надо перевести:

        $$ A_5^2 = 5 \cdot 4 = 20 $$

        Каждой из этих $20$ пар языков требуется свой словарь.
        Значит, всего нужно $20$ словарей.

        Если языков $10$, то потребуется уже $A_{10}^2 = 90$ словарей, что на $70$ больше, чем в случае с $5$ языками.
    answer: |
        Для $5$ языков нужно $A_5^2 = 20$ словарей.
        Если языков $10$, то нужно на $70$ больше словарей.

{ #fate-exists }
@task
    title: Существует ли судьба?
    statement: |
        Докажите, что $A_n^n = A_n^{n-1}$.<br>
        Объясните смысл этого равенства.
    solution: |
        Доказывается равенство элементарно.
        Выпишем сначала формулу для $A_n^n$:

        $$ A_n^n = n \cdot (n-1) \cdot \ldots \cdot 2 \cdot 1 $$

        Умножение на один в конце на результат никак не влияет, поэтому его можно отбросить.
        Но если мы его отбросим, то количество вакантных мест для размещения без повторений уменьшится на единицу: с $n$ до $n-1$.
        А это и будет $A_n^{n-1}$!

        $$ A_n^n = n \cdot (n-1) \cdot \ldots \cdot 2 = A_n^{n-1} $$

        $$ A_n^n = A_n^{n-1} $$

        $\blacksquare$

        ### Смысл равенства

        В самой сути размещения без повторений лежит [правило произведения](^productRule).
        На первое вакантное место мы можем поместить $n$ элементов, на второе $n-1$ элементов и так далее.

        На вакантное место под номером $n-1$ у нас остается в запасе всего $2$ элемента.
        Поместив на это место один из них, оставшийся последний элемент **автоматом попадает** на место $n$.
        Мы его даже не выбираем, его судьба определяется еще на $n-1$ месте.

        Раз элемент для места $n$ не дает никаких разветвлений, а определяется уже на $n-1$ месте, то и формула $A_n^{n-1}$ дает тот же результат, что и формула $A_n^n$.

@task
    title: Родовые апельсины
    statement: |
        У отца есть $5$ различных апельсинов, которые он дает своим $8$ сыновьям, причем каждый получает или один апельсин, или ничего.
        Сколькими способами это можно сделать?
        А если число апельсинов, получаемых каждым сыном, не ограничено?
        Как изменится ответ, если отец должен раздать все пять апельсинов?
    hint: |
        Используйте размещения из сыновей по апельсинам.
    solution: |
        К этой задаче есть два подхода.
        В более простом подходе отец обязательно раздает все пять апельсинов.
        В более сложном подходе отец не обязательно отдает все апельсины.
        
        ### Отец отдает все апельсины
        
        Если отец точно отдает все апельсины, то нам достаточно выписать все [размещения без повторений](^aUnique) из $8$ сыновей по $5$ апельсинам.

        $$ A_8^5 = \underset{A1}{\undergroup{8}} \cdot \underset{A2}{\undergroup{7}} \cdot \underset{A3}{\undergroup{6}} \cdot \underset{A4}{\undergroup{5}} \cdot \underset{A5}{\undergroup{4}} = 6720 $$

        Если число апельсинов, получаемых каждым сыном, не ограничено, то вместо размещения без повторений используем [размещения с повторениями](^aRepeat):

        $$ \A_8^5 = 8^5 = 32 \ 768 $$

        ### Отец может отдать не все апельсины

        В этой ситуации нам надо отдельно рассчитать все способы отдать только $1$ апельсин, только $2$ и так далее.
        Потом объединить все эти способы с помощью [правила суммы](^sumRule).

        Отец может решить не отдавать апельсины вообще.
        Это первый способ.

        $$ 1 $$

        Отец может решить отдать только один апельсин.
        Сделать это он может $A_8^1$ способами если у каждого сына не может быть больше одного апельсина и $\A_8^1$, есть ограничений нет.
        Объединяем с предыдущим результатом:

        $$ 1 + A_8^1 \qquad 1 + \A_8^1 $$

        Отец может решить отдать только два апельсина.
        Сделать это он может $A_8^2$ способами если у каждого сына не может быть больше одного апельсина и $\A_8^2$, есть ограничений нет.
        Объединяем с предыдущим результатом:

        $$ 1 + A_8^1 + A_8^2 \qquad 1+ \A_8^1 + \A_8^2 $$

        Ну и так далее вплоть до пяти апельсинов:

        @math
            1 + A_8^1 + A_8^2 + A_8^3 + A_8^4 + A_8^5 = 8801
            \\
            1 + \A_8^1 + \A_8^2 + \A_8^3 + \A_8^4 + \A_8^5 = 37 \ 449
    answer: |
        Отец отдает все апельсины. У каждого сына не более $1$ апельсина:

        $$ A_8^5 = 6720 $$

        Отец отдает все апельсины. Ограничений на количество апесинов у сыновей нет:

        $$ \A_8^5 = 32 \ 768 $$

        Отец может отдать не все апельсины. У каждого сына не более $1$ апельсина:

        $$ 1 + A_8^1 + A_8^2 + A_8^3 + A_8^4 + A_8^5 = 8801 $$
        
        Отец может отдать не все апельсины. Ограничений на количество апесинов у сыновей нет:

        $$ 1 + \A_8^1 + \A_8^2 + \A_8^3 + \A_8^4 + \A_8^5 = 37 \ 449 $$

@task
    title: День студента
    statement: |
        В комнате студенческого общежития живут трое студентов.
        У них есть $4$ чашки, $5$ блюдец и $6$ чайных ложек (все чашки, блюдца и ложки отличаются друг от друга).
        Сколькими способами они могут накрыть стол для чаепития (каждый получает чашку, блюдце и ложку)?
    hint: |
        Отдельно посчитайте, сколькими способами можно выдать каждый элемент посуды.
    solution: |
        Разберемся с каждым типом посуды отдельно.
        Каждый способ раздать чашки можно представить как [размещение без повторений](^aUnique) из $4$ чашек по $3$ студентам:

        $$ A_4^3 = \underset{С1}{\undergroup{4}} \cdot \underset{С2}{\undergroup{3}} \cdot \underset{С3}{\undergroup{2}} = 24 $$

        Точно так же считаем количество способов раздать блюдца и чайные ложки:

        $$ A_5^3 = 60 \qquad A_6^3 = 120 $$

        Итак, выдать чашки можно $24$ способами.
        Вне зависимости от выбранного способа выдать чашки, потом есть еще $60$ способов выдать блюдца и $120$ способов выдать чайные ложки.
        Применяем [правило произведения](^productRule):

        $$ A_4^3 \cdot A_5^3 \cdot A_6^3 = 24 \cdot 60 \cdot 120 = 172 \ 800 $$
    answer: |
        $$ A_4^3 \cdot A_5^3 \cdot A_6^3 = 172 \ 800 $$

@task
    title: Остатся только один
    statement: |
        В соревновании по гимнастике участвуют $10$ человек.
        Трое судей должны независимо друг от друга пронумеровать их в порядке, отражающем их выступление в соревновании.
        Победителем считается тот, кого назовут первым хотя бы двое судей.
        В скольких случаях победитель соревнований будет определен?
    hint: |
        Проще найти не количество совпадений в решениях судей относительно первого места, а варианты, когда они все выбрали разных гимнастов на первое место.
    solution: |
        Найдем, сколькими способами судьи могут выбрать участников на первое место.
        Каждый такой способ можно представить как [размещение с повторениями](^aRepeat) из $10$ участников по первым местам в списках $3$ судей:

        $$ \A_{10}^3 = 10^3 =  \underset{Судья \ 1}{\undergroup{10}} \cdot \underset{Судья \ 2}{\undergroup{10}} \cdot \underset{Судья \ 3}{\undergroup{10}} = 1000 $$

        Искать совпадения решений трех или двух судей довольно сложно.
        Вместо этого найдем все варианты, когда судьи отдали первое место **разным** гимнастам.
        Каждый такой вариант можно представить как [размещение без повторений](^aUnique) из $10$ гимнастов по $3$ судьям:

        $$ A_{10}^3 = \underset{Судья \ 1}{\undergroup{10}} \cdot \underset{Судья \ 2}{\undergroup{9}} \cdot \underset{Судья \ 3}{\undergroup{8}} = 720 $$

        Всего назначить первые места можно $1000$ способами, из них $720$ вариантов, где все судьи выбрали разных гимнастов.
        Тогда остается $1000 - 720 = 280$ вариантов, когда как минимум двое судей сошлись во мнениях относительно первого места.
    answer: |
        $$ \A_{10}^3 - A_{10}^3 = 280 $$

@task
    title: Страсти по масти
    statement: |
        Сколькими способами можно выбрать из полной колоды карт, содержащей $52$ карты, по одной карте каждой масти?
        А если среди вынутых карт нет ни одной пары одинаковых, т.е. двух королей, двух десяток и т.д.?
    hint: |
        В каждой масти есть по $13$ карт.
    solution: |
        На каждую из четырех мастей приходится по $13$ карт.
        Тогда каждый способ выбрать по одной карте каждой масти можно представить как [размещение с повторениями](^aRepeat) из $13$ карт каждой масти по $4$ соответствующим мастям:

        $$ \A_{13}^4 = 13^4 = \underset{Пики}{\undergroup{13}} \cdot \underset{Черви}{\undergroup{13}} \cdot \underset{Бубны}{\undergroup{13}} \cdot \underset{Трефы}{\undergroup{13}} = 28 \ 561 $$

        А если не должно быть одинаковых карт, то, вынув карту первой масти, мы тем самым оставляем только $12$ вариантов вынуть карту второй масти и так далее.
        Это уже [размещения без повторений](^aUnique):

        $$ A_{13}^4 = \underset{Пики}{\undergroup{13}} \cdot \underset{Черви}{\undergroup{12}} \cdot \underset{Бубны}{\undergroup{11}} \cdot \underset{Трефы}{\undergroup{10}} = 17 \ 160 $$
    answer: |
        $\A_{13}^4 = 28 \ 561$ способов выбрать $4$ карты разных мастей и $A_{13}^4 = 17 \ 160$ способов выбрать их без повторений.

{ #wonder-calc }
@task
    title: Чудо-счетчик
    statement: |
        Найдите сумму всех трехзначных чисел, которые можно написать с помощью цифр $1, 2, 3, 4$.
        А если никакая цифра не должна появляться дважды в записи каждого числа?
    hint: |
        По отдельности найдите сумму всех единиц, всех десятков и всех сотен в составе этих трехзначных чисел.
    solution: |
        Любые трехзначные числа, например $423$ и $122$, можно записать в развернутом виде:

        $$ 423 = 400 + 20 + 3 \\ 122 = 100 + 20 + 2 $$

        Вместо того, чтобы складывать числа напрямую, можно по отдельности сложить их единицы, их десятки и их сотни.

        @math
            \begin{array}{}
                423 & = & 400 & + & 20 & + & 3
                \\
                + & & + & & + & & +
                \\
                122 & = & 100 & + & 20 & + & 2
                \\
                \shortparallel && \shortparallel && \shortparallel && \shortparallel
                \\
                545 & = & 500 & + & 40 & + & 5
            \end{array}

        Тогда задача сводится к поиску суммы всех единиц, всех десятков и всех сотен в составе этих трехзначных чисел.

        ### С повторениями

        Давайте посчитаем, сколько трехзначных чисел имеют в разряде единиц цифру $1$, или, другими словами, заканчиваются на цифру $1$.
        Если разряд единиц менять нельзя, то остаются только [размещения с повторениями](^aRepeat) из $4$ цифр по $2$ оставшимся разрядам: десяткам и сотням.

        $$ \A_4^2 = 4^2 = \underset{Сотни}{\undergroup{4}} \cdot \underset{Десятки}{\undergroup{4}} = 16 $$

        Всего $16$ трехзначных чисел, которые заканчиваются на $1$.
        Но еще $16$, которые заканчиваются на $2$.
        Столько же и для $3$ и для $4$ на конце.

        Найдем сумму единиц всех этих трехзначных чисел, то есть сумму $16$ единиц, $16$ двоек, $16$ троек и $16$ четверок:

        $$ 16 \cdot 1 + 16 \cdot 2 + 16\cdot 3 + 16\cdot 4 = \\ = 16 \cdot (1 + 2 + 3 +4) = \\ = 16 \cdot 10 = 160 $$

        Точно такая же история и с разрядом десятков.
        Есть $16$ чисел, у которых в разряде десятков стоит цифра $1$, $16$ чисел с цифрой $2$ и так далее.
        Найдем сумму десятков всех этих трехзначных чисел, то есть сумму $16$ десяток, $16$ двадцаток и так далее:

        $$ 16 \cdot 10 + 16\cdot 20 + 16\cdot 30 + 16\cdot 40 = \\ = 16\cdot (10 + 20 + 30 + 40) = \\ = 16 \cdot 100 = 1600 $$

        Наконец, по такой же схеме найдем сумму сотен всех этих трехзначных чисел:

        $$ 16\cdot 100 + 16\cdot 200 + 16\cdot 300 + 16\cdot 400 = \\ = 16\cdot (100 + 200 + 300 + 400) = \\ = 16 \cdot 1000 = 16 \ 000 $$

        Мы по отдельности нашли сумму всех единиц, всех десятков и всех сотен в составе этих трехзначных чисел.
        Теперь сложим все это друг с другом и получим искомую сумму всех чисел:

        $$ 16 \ 000 + 1600 + 160 = 17 \ 760 $$

        ### Без повторений

        Если никакая цифра не должна появляться дважды в записи трехзначного числа, то вместо размещений с повторениями надо использовать [размещения без повторений](^aUnique), причем уже из $3$ цифр, потому что одну мы уже зафиксировали.

        Например, если зафиксировали разряд единиц, то формула такая:

        $$ A_3^2 = \underset{Сотни}{\undergroup{3}} \cdot \underset{Десятки}{\undergroup{2}} = 6 $$ 

        Ну и повторяем все те же самые действия:

        $$ 6 \cdot 10 = 60 \\ 6 \cdot 100 = 600 \\ 6\cdot 1000 = 6000 $$

        Сумма всех чисел:

        $$ 6000 + 600 + 60 = 6660 $$
    answer: |
        Сумма всех трехзначных чисел равна $ 17 \ 760 $.
        Если одинаковых цифр нет, то сумма равна $6660$.

{ #soul-dices }
@task
    title: Разные кости судьбы
    statement: |
        Сколькими способами могут выпасть три различные игральные кости?
        Во скольких случаях хотя бы на одной кости выпадет $6$ очков?
        Во скольких случаях ровно на одной кости выпадет $6$ очков?
        Во скольких случаях ровно на одной кости выпадет $6$ очков, а на другой -- $3$ очка?
    hint: |
        Пользуйтесь размещениями с повторениями, без повторений и [правилом умножения](^productRule).
    solution: |
        Каждая из $3$ костей может упасть на одну из $6$ сторон.
        Каждый способ выпадания трех костей можно представить как размещение с повторениями из $6$ возможных выпавших сторон по $3$ костям.
        Находим количество этих размещений по [формуле](article|combinatorics/arrangement|t:arrangement-repeat):

        $$ \bar{A}_6^3 = 6^3 = 216 $$

        Варианты выпадения не менее одной шестерки можно получить, если из всех возможных вариантов вычесть варианты, когда шестерка точно не выпадает:

        $$ \bar{A}_6^3 - \bar{A}_5^3 = 216 - 125 = 91 $$

        Для выпадения ровно одной шестерки сначала $3$-мя способами выбираем кость, на которой выпадет шестерка.
        Вне зависимости от выбранной кости оставшиеся две могут выпасть $\bar{A}_5^2$ способами.
        Используем [правило умножения](^productRule):

        $$ 3\cdot \bar{A}_5^2 = 75 $$

        Для выпадения ровно одной шестерки и тройки сначала выберем пару костей, на которых выпадет $6$ и $3$.
        Для этого "разместим" числа $6$ и $3$ без повторений по $3$ костям: $A_3^2$.
        Вне зависимости выбора двух костей, на оставшейся третьей кости может выпасть $4$ возможных стороны.
        Используем правило умножения:

        $$ A_3^2 \cdot 4 = 24 $$
    answer: |
        Варианты выпадения трех костей:

        $$ \bar{A}_6^3 = 6^3 = 216 $$

        Если есть хотя бы одна кость с $6$ очками:

        $$ \bar{A}_6^3 - \bar{A}_5^3 = 91 $$

        Если есть ровно одна кость с $6$ очками:

        $$ 3\cdot \bar{A}_5^2 = 75 $$

        Если на одной кости ровно $6$ очков, а на другой $2$:

        $$ A_3^2 \cdot 4 = 24 $$

@task
    title: Превосходство четырех
    statement: |
        Сколько различных четырехзначных чисел, делящихся на $4$, можно составить из цифр $1,2,3,4,5$, если каждая цифра может встречаться несколько раз?
        А если каждая цифра встречается лишь один раз?
    hint: |
        Число делится на $4$, если его последние две цифры образуют число, которое делится на $4$.
    solution: |
        В первых двух разрядах можно поместить любые цифры:

        $$ \A_5^2 = 5^2 = 25 $$

        Последние две цифры должны образовать число, которое делится на $4$.
        Найдем все такие числа [прямым перебором](@article|combinatorics/brute-force).
        Фиксируем первую цифру и перебираем вторую:

        @math
            11, \textcolor{#0f82ff}{12}, 13, 14, 15 \\
            21, 22, 23, \textcolor{#0f82ff}{24}, 25 \\
            31, \textcolor{#0f82ff}{32}, 33, 34, 35 \\
            41, 42, 43, \textcolor{#0f82ff}{44}, 45 \\
            51, \textcolor{#0f82ff}{52}, 53, 54, 55

        Всего $5$ способов завершить число.
        Используем [правило проиведения](^productRule):

        $$ \A_5^2 \cdot 5 = 25 \cdot 5 = 125 $$

        Если цифры не могут повторяться, то надо зайти с другой стороны.
        Всего есть $4$ способа выбрать последние две цифры (кроме $44$).
        Но тогда две цифры уже заняты, поэтому на место первых двух цифр остается разместить три оставшиеся без повторений:

        $$ 4\cdot A_3^2 = 4\cdot 3 \cdot 2 = 24 $$
    answer: |
        Если цифры могут повторяться: $ \A_5^2 \cdot 5  = 125 $.
        <br>
        Если не могут: $ 4\cdot A_3^2 = 24 $

{ #number-composition }
@task
    title: Композиция числа
    tags:
        - Красивая
        - Нестандартная
    statement: |
        Сколькими способами можно разложить число $n$ на слагаемые?

        Например, число $3$ имеет $4$ композиции:

        $$ 3 = 1 + 2 = 2 + 1 = 1 + 1 + 1 $$

        *Порядок слагаемых имеет значение!*
    hint: |
        Представьте число $n$ как сумму $n$ единиц.
        Подумайте, на что можно заменить плюсы в этой сумме.
    solution: |
        Самый длинный способ записать число $n$ -- представить его в виде суммы $n$ единиц:

        $$ n = \underbrace{1 + 1 + \ldots + 1}_{n \ раз} $$

        Заменим теперь в этой записи все плюсы на пустые квадраты.
        Всего этих пустых квадратов $n-1$, на единицу меньше, чем количество единиц:

        $$ n = 1 \ \Box \ 1 \ \Box \ldots \Box \ 1 \ \Box \ 1 $$
        
        В каждый из этих квадратов можно вписать либо ($+$), либо запятую ($,$).
        Каждое заполнение всех квадратов даст в результате очередное разложение числа.
        Например:

        $$ 5 = 2 + 1 + 2 = 1 \ \boxed{+} \ 1 \ \boxed{,} \ 1 \ \boxed{,} \ 1 \ \boxed{+} \ 1 $$

        Итак, каждое разложение числа $n$ на слагаемые можно представить как [размещение с повторением](^aRepeat) из двух символов (плюса и запятой) по $n-1$ квадратам:

        $$ \A_2^{n-1} = 2^{n-1} $$

        $\blacksquare$
    answer: $2^{n-1}$
    note: |
        Как видите, задача о нахождении количества композиций любого числа решается довольно просто.
        Но у этой задачи есть злобный брат-близнец -- **задача о разбиении числа**.
        Это почти то же самое, вот только порядок слагаемых значения не имеет.

        Например, число $3$ имеет $4$ композиции, но только $3$ разбиения:

        $$ 3 = 1 + 2 = 1 + 1 + 1 $$

        Казалось бы, если для нахождения композиций есть простая формула, то и разбиения должны находиться примерно так же элементарно.
        К сожалению, это не так.
        До сих пор не найдено явной формулы для количества разбиений и неизвестно, есть ли она вообще!
        Были найдены асимпотитические формулы.
        Их получили математики Годфри Харди и Сриниваса Рамануджан.

        Поразительно, как одна задача имеет элементарное решение, а вторая, практичеки идентичная первой, явного решения не имеет вовсе.

        Про удивительную жизнь Рамануджана снят отличный фильм -- "Человек, который познал бесконечность".
        В нем есть сцены, где оба математика занимаются выводом и доказательством формул количества разбиений.

        @image
            src: assets/hardi-ramanujan.jpg
            width: 600px
            caption:
                main: Харди и Рамануджан в Кембридже
                secondary: Фильм "Человек, который познал бесконечность", 2015

@todo
    title: Графический ключ
    content: |
        В некоторых телефонах на Android вместо пинкода из цифр можно задать пальцем рисунок для разблокировки.
        Сколькими способами можно задать этот рисунок?

@todo
    title: Задачи на обратный поиск
    content: |
        Например, когда дается количество размещений и $k$, а просят найти $n$ и так далее.
        Тут легко их сделать генерирующимися.